!function(){"use strict";function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var t=function(){function t(e){var n,o,r=this,i=e.data,a=e.templateSelector,c=e.handleClick,l=e.handleDelete,u=e.likeCard,s=e.unlikeCard,f=e.userId;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=function(){r._placeDeleteButton.closest(".place").remove()},(n="_removeCard")in this?Object.defineProperty(this,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):this[n]=o,this._name=i.name,this._link=i.link,this._likes=i.likes,this._cardId=i._id,this._owner=i.owner,this._userId=f,this._templateSelector=a,this._handleClick=c,this._handleDelete=l,this._handleLikeCard=u,this._handleUnlikeCard=s}var n,o;return n=t,(o=[{key:"_getPlaceElement",value:function(){return document.querySelector(this._templateSelector).content.querySelector(".place").cloneNode(!0)}},{key:"_getPlaceDetails",value:function(){var e=this;this._place=this._getPlaceElement(),this._placeTitle=this._place.querySelector(".place__title"),this._placeImage=this._place.querySelector(".place__image"),this._placeLikeButton=this._place.querySelector(".place__love-button"),this._placeLikeCount=this._place.querySelector(".place__love-count"),this._placeDeleteButton=this._place.querySelector(".place__delete-button"),this._owner._id!==this._userId&&this._placeDeleteButton.classList.add("hidden"),this._likes.some((function(t){return t._id===e._userId}))&&this._placeLikeButton.classList.add("place__love-button_active"),this._placeLikeCount.textContent=this._likes.length,this._placeTitle.textContent=this._name,this._placeImage.src=this._link,this._placeImage.alt="".concat(this._name," picture")}},{key:"_likeCard",value:function(){this._placeLikeButton.classList.contains("place__love-button_active")?(this._handleUnlikeCard(this._cardId,this._placeLikeCount),this._placeLikeButton.classList.remove("place__love-button_active")):(this._handleLikeCard(this._cardId,this._placeLikeCount),this._placeLikeButton.classList.add("place__love-button_active"))}},{key:"_setEventListeners",value:function(){var e=this;this._placeLikeButton.addEventListener("click",(function(){e._likeCard()})),this._placeDeleteButton.addEventListener("click",(function(){e._handleDelete(e._cardId,e._removeCard)})),this._placeImage.addEventListener("click",(function(){e._handleClick()}))}},{key:"generateCard",value:function(){return this._getPlaceDetails(),this._setEventListeners(),this._place}}])&&e(n.prototype,o),t}();function n(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var o=function(){function e(t,n){var o=t.formSelector,r=t.fieldSelector,i=t.submitButtonSelector,a=t.inactiveButtonClass,c=t.fieldErrorClass,l=t.errorClass;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._formSelector=o,this._fieldSelector=r,this._submitButtonSelector=i,this._inactiveButtonClass=a,this._fieldErrorClass=c,this._errorClass=l,this._formElement=n}var t,o;return t=e,(o=[{key:"_showFieldError",value:function(e,t){var n=this._formElement.querySelector("#".concat(e.id,"-error"));e.classList.add(this._fieldErrorClass),n.textContent=t,n.classList.add(this._errorClass)}},{key:"_hideFieldError",value:function(e){var t=this._formElement.querySelector("#".concat(e.id,"-error"));e.classList.remove(this._fieldErrorClass),t.classList.remove(this._errorClass),t.textContent=""}},{key:"_checkFieldValidity",value:function(e){e.validity.valid?this._hideFieldError(e):this._showFieldError(e,e.validationMessage)}},{key:"_hasInvalidField",value:function(){return this._fieldList.some((function(e){return!e.validity.valid}))}},{key:"_toggleButtonState",value:function(){this._hasInvalidField()?(this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.disabled=!0):(this._buttonElement.classList.remove(this._inactiveButtonClass),this._buttonElement.removeAttribute("disabled"))}},{key:"_setEventListeners",value:function(){var e=this;this._fieldList=Array.from(this._formElement.querySelectorAll(this._fieldSelector)),this._buttonElement=this._formElement.querySelector(this._submitButtonSelector),this._toggleButtonState(),this._fieldList.forEach((function(t){t.addEventListener("input",(function(){e._checkFieldValidity(t),e._toggleButtonState()}))})),this._formElement.addEventListener("reset",(function(){e._fieldList.forEach((function(t){t.value="",e._hideFieldError(t)})),e._toggleButtonState()}))}},{key:"enableValidation",value:function(){this._setEventListeners()}}])&&n(t.prototype,o),e}();function r(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i(this,"_handleEscClose",(function(e){"Escape"===e.key&&n.close()})),i(this,"_handleClickOutsidePopup",(function(e){e.target.classList.contains("popup_opened")&&n.close()})),this._popupElement=document.querySelector(t)}var t,n;return t=e,(n=[{key:"_addEventToDocument",value:function(){document.addEventListener("keydown",this._handleEscClose)}},{key:"_removeEventFromDocument",value:function(){document.removeEventListener("keydown",this._handleEscClose)}},{key:"open",value:function(){this._popupElement.classList.add("popup_opened"),this._addEventToDocument()}},{key:"close",value:function(){this._popupElement.classList.remove("popup_opened"),this._removeEventFromDocument()}},{key:"setEventListeners",value:function(){var e=this;this._popupElement.addEventListener("click",this._handleClickOutsidePopup),this._popupElement.querySelector(".popup__close-button").addEventListener("click",(function(){return e.close()}))}}])&&r(t.prototype,n),e}();function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function l(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function u(e,t,n){return u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=h(e)););return e}(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(n):r.value}},u(e,t,n||e)}function s(e,t){return s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},s(e,t)}function f(e,t){if(t&&("object"===c(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return p(e)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(a,e);var t,n,o,r,i=(o=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=h(o);if(r){var n=h(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return f(this,e)});function a(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),_(p(n=i.call(this,t)),"_onUpload",(function(){n.submitButton=n._popupForm.querySelector(".popup__submit-button"),n.submitButton.textContent="Saving..."})),_(p(n),"_afterUpload",(function(){n.submitButton.textContent="Save"})),_(p(n),"_handleSubmitEvent",(function(e){e.preventDefault(),n._getInputValues(),n._callback(n._formValues,n._onUpload,n._afterUpload)})),n._callback=e,n._popupForm=n._popupElement.querySelector(".popup__form"),n}return t=a,(n=[{key:"close",value:function(){u(h(a.prototype),"close",this).call(this),this._popupForm.reset()}},{key:"_getInputValues",value:function(){var e=this;this._formValues={},this._popupForm.querySelectorAll(".popup__field").forEach((function(t){return e._formValues[t.name]=t.value}))}},{key:"setEventListeners",value:function(){u(h(a.prototype),"setEventListeners",this).call(this),this._popupForm.addEventListener("submit",this._handleSubmitEvent)}}])&&l(t.prototype,n),a}(a);function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function b(e,t,n){return b="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=g(e)););return e}(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(n):r.value}},b(e,t,n||e)}function k(e,t){return k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},k(e,t)}function E(e,t){if(t&&("object"===m(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}var S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}(a,e);var t,n,o,r,i=(o=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=g(o);if(r){var n=g(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return E(this,e)});function a(){return v(this,a),i.apply(this,arguments)}return t=a,(n=[{key:"open",value:function(e){var t=e.name,n=e.link,o=this._popupElement.querySelector(".popup__image"),r=this._popupElement.querySelector(".popup__image-location");o.src=n,o.alt="".concat(t," picture"),r.textContent=t,b(g(a.prototype),"open",this).call(this)}}])&&y(t.prototype,n),a}(a);function C(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var w=function(){function e(t,n){var o=t.items,r=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderedItems=o,this._renderer=r,this._container=document.querySelector(n)}var t,n;return t=e,(n=[{key:"addItem",value:function(e){this._container.prepend(e)}},{key:"renderItems",value:function(){var e=this;this._renderedItems.forEach((function(t){e._renderer(t)}))}}])&&C(t.prototype,n),e}();function L(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var j=function(){function e(t){var n=t.nameSelector,o=t.jobSelector,r=t.avatarSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._nameElement=document.querySelector(n),this._jobElement=document.querySelector(o),this._avatarElement=document.querySelector(r)}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{name:this._nameElement.textContent,job:this._jobElement.textContent}}},{key:"setUserInfo",value:function(e){var t=e.profileName,n=e.profileJob,o=e.profileAvatar;t&&n&&o&&(this._nameElement.textContent=t,this._jobElement.textContent=n,this._avatarElement.style.backgroundImage="url(".concat(o,")"))}}])&&L(t.prototype,n),e}();function P(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var O=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._baseUrl=t.baseUrl,this._headers=t.headers}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return fetch("".concat(this._baseUrl,"/users/me"),{headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}},{key:"getInitialCards",value:function(){return fetch("".concat(this._baseUrl,"/cards"),{headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}},{key:"updateUserInfo",value:function(e){return fetch("".concat(this._baseUrl,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e.profileName,about:e.profileJob})}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}},{key:"updateUserAvatar",value:function(e){return fetch("".concat(this._baseUrl,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e.profilePictureURL})}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}},{key:"uploadPlace",value:function(e){return fetch("".concat(this._baseUrl,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify({name:e.name,link:e.link})}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}},{key:"deleteCard",value:function(e){return fetch("".concat(this._baseUrl,"/cards/").concat(e),{method:"DELETE",headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}},{key:"likeCard",value:function(e){return fetch("".concat(this._baseUrl,"/cards/likes/").concat(e),{method:"PUT",headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}},{key:"unlikeCard",value:function(e){return fetch("".concat(this._baseUrl,"/cards/likes/").concat(e),{method:"DELETE",headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}}])&&P(t.prototype,n),e}(),I=document.querySelector(".popup__field_el_title"),q=document.querySelector(".popup__field_el_subtitle"),B=document.querySelector(".profile__add-button"),U=(document.querySelector(".popup__field_el_place-title"),document.querySelector(".popup__field_el_place-image-url"),document.querySelector(".popup__image"),document.querySelector(".popup__image-location"),document.querySelector(".profile__edit-button")),T=document.querySelector(".popup_type_confirm .popup__submit-button"),D=document.querySelector(".profile__overlay"),R=new j({nameSelector:".profile__title",jobSelector:".profile__subtitle",avatarSelector:".profile__avatar"}),x=new O({baseUrl:"https://around.nomoreparties.co/v1/group-11",headers:{authorization:"403bdafc-0a52-4e02-9b82-c7e8e4f7ffb1","Content-Type":"application/json"}});function F(e){var t=e.name,n=e.about,o=e.avatar;R.setUserInfo({profileName:t,profileJob:n,profileAvatar:o})}var A="",V="",N=function(e){var n=function(e){return new t({data:e,templateSelector:"#place-template",handleClick:function(){J.open(e)},handleDelete:function(e,t){G.open(),T.addEventListener("click",(function(n){n.preventDefault(),x.deleteCard(e).then((function(){t()})).catch((function(e){console.log(e)})),G.close()}))},likeCard:function(e,t){x.likeCard(e).then((function(e){t.textContent=e.likes.length})).catch((function(e){console.log(e)}))},unlikeCard:function(e,t){x.unlikeCard(e).then((function(e){t.textContent=e.likes.length})).catch((function(e){console.log(e)}))},userId:A}).generateCard()}(e);V.addItem(n)};Promise.all([x.getUserInfo(),x.getInitialCards()]).then((function(e){F(e[0]),A=e[0]._id,V=new w({items:e[1],renderer:function(e){N(e)}},".places"),A&&V.renderItems()})).catch((function(e){console.log(e)}));var J=new S(".popup_type_image");Array.from(document.querySelectorAll(".popup__form")).forEach((function(e){new o({formSelector:".popup__form",fieldSelector:".popup__field",submitButtonSelector:".popup__submit-button",inactiveButtonClass:"popup__submit-button_disabled",fieldErrorClass:"popup__field_type_error",errorClass:"popup__field-error_active"},e).enableValidation()}));var H=new d((function(e,t,n){t(),x.uploadPlace({name:e.placeName,link:e.placeImageURL}).then((function(e){N(e),H.close()})).catch((function(e){console.log(e)})).finally((function(){n()}))}),".popup_type_add"),z=new d((function(e,t,n){t(),x.updateUserInfo(e).then((function(e){F(e),z.close()})).catch((function(e){console.log(e)})).finally((function(){n()}))}),".popup_type_edit"),M=new d((function(e,t,n){t(),x.updateUserAvatar(e).then((function(e){F(e),M.close()})).catch((function(e){console.log(e)})).finally((function(){n()}))}),".popup_type_change"),G=new a(".popup_type_confirm");H.setEventListeners(),z.setEventListeners(),M.setEventListeners(),J.setEventListeners(),G.setEventListeners(),U.addEventListener("click",(function(){z.open();var e=R.getUserInfo(),t=e.name,n=e.job;I.value=t,q.value=n})),B.addEventListener("click",(function(){H.open()})),D.addEventListener("click",(function(){M.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q2xCOUIsRUFBVzhCLG9CQUNYM0IsRUFBYTJCLG9CQUViekMsRUFBa0JySCxpQkFBaUIsU0FBUyxXQUMxQzBKLEVBQWlCekIsT0FFakIsTUFBc0JULEVBQVN1QixjQUF2QmpMLEVBQVIsRUFBUUEsS0FBTXdILEVBQWQsRUFBY0EsSUFDZDRCLEVBQWdCMUUsTUFBUTFFLEVBQ3hCcUosRUFBbUIzRSxNQUFROEMsS0FHN0I4QixFQUFpQnBILGlCQUFpQixTQUFTLFdBQ3pDbUosRUFBY2xCLFVBR2hCVixFQUFldkgsaUJBQWlCLFNBQVMsV0FDdkM0SixFQUFrQjNCLFUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL0FwaS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3NjcmlwdHMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvcGFnZXMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XG4gIGNvbnN0cnVjdG9yKHtcbiAgICBkYXRhLFxuICAgIHRlbXBsYXRlU2VsZWN0b3IsXG4gICAgaGFuZGxlQ2xpY2ssXG4gICAgaGFuZGxlRGVsZXRlLFxuICAgIGxpa2VDYXJkLFxuICAgIHVubGlrZUNhcmQsXG4gICAgdXNlcklkLFxuICB9KSB7XG4gICAgdGhpcy5fbmFtZSA9IGRhdGEubmFtZTtcbiAgICB0aGlzLl9saW5rID0gZGF0YS5saW5rO1xuICAgIHRoaXMuX2xpa2VzID0gZGF0YS5saWtlcztcbiAgICB0aGlzLl9jYXJkSWQgPSBkYXRhLl9pZDtcbiAgICB0aGlzLl9vd25lciA9IGRhdGEub3duZXI7XG4gICAgdGhpcy5fdXNlcklkID0gdXNlcklkO1xuICAgIHRoaXMuX3RlbXBsYXRlU2VsZWN0b3IgPSB0ZW1wbGF0ZVNlbGVjdG9yO1xuICAgIHRoaXMuX2hhbmRsZUNsaWNrID0gaGFuZGxlQ2xpY2s7XG4gICAgdGhpcy5faGFuZGxlRGVsZXRlID0gaGFuZGxlRGVsZXRlO1xuICAgIHRoaXMuX2hhbmRsZUxpa2VDYXJkID0gbGlrZUNhcmQ7XG4gICAgdGhpcy5faGFuZGxlVW5saWtlQ2FyZCA9IHVubGlrZUNhcmQ7XG4gIH1cblxuICBfZ2V0UGxhY2VFbGVtZW50KCkge1xuICAgIGNvbnN0IHBsYWNlRWxlbWVudCA9IGRvY3VtZW50XG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl90ZW1wbGF0ZVNlbGVjdG9yKVxuICAgICAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5wbGFjZVwiKVxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcbiAgICByZXR1cm4gcGxhY2VFbGVtZW50O1xuICB9XG5cbiAgX2dldFBsYWNlRGV0YWlscygpIHtcbiAgICB0aGlzLl9wbGFjZSA9IHRoaXMuX2dldFBsYWNlRWxlbWVudCgpO1xuICAgIHRoaXMuX3BsYWNlVGl0bGUgPSB0aGlzLl9wbGFjZS5xdWVyeVNlbGVjdG9yKFwiLnBsYWNlX190aXRsZVwiKTtcbiAgICB0aGlzLl9wbGFjZUltYWdlID0gdGhpcy5fcGxhY2UucXVlcnlTZWxlY3RvcihcIi5wbGFjZV9faW1hZ2VcIik7XG4gICAgdGhpcy5fcGxhY2VMaWtlQnV0dG9uID0gdGhpcy5fcGxhY2UucXVlcnlTZWxlY3RvcihcIi5wbGFjZV9fbG92ZS1idXR0b25cIik7XG4gICAgdGhpcy5fcGxhY2VMaWtlQ291bnQgPSB0aGlzLl9wbGFjZS5xdWVyeVNlbGVjdG9yKFwiLnBsYWNlX19sb3ZlLWNvdW50XCIpO1xuICAgIHRoaXMuX3BsYWNlRGVsZXRlQnV0dG9uID0gdGhpcy5fcGxhY2UucXVlcnlTZWxlY3RvcihcbiAgICAgIFwiLnBsYWNlX19kZWxldGUtYnV0dG9uXCJcbiAgICApO1xuXG4gICAgaWYgKHRoaXMuX293bmVyLl9pZCAhPT0gdGhpcy5fdXNlcklkKSB7XG4gICAgICB0aGlzLl9wbGFjZURlbGV0ZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwiaGlkZGVuXCIpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9saWtlcy5zb21lKChpdGVtKSA9PiBpdGVtLl9pZCA9PT0gdGhpcy5fdXNlcklkKSkge1xuICAgICAgdGhpcy5fcGxhY2VMaWtlQnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJwbGFjZV9fbG92ZS1idXR0b25fYWN0aXZlXCIpO1xuICAgIH1cbiAgICB0aGlzLl9wbGFjZUxpa2VDb3VudC50ZXh0Q29udGVudCA9IHRoaXMuX2xpa2VzLmxlbmd0aDtcbiAgICB0aGlzLl9wbGFjZVRpdGxlLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcbiAgICB0aGlzLl9wbGFjZUltYWdlLnNyYyA9IHRoaXMuX2xpbms7XG4gICAgdGhpcy5fcGxhY2VJbWFnZS5hbHQgPSBgJHt0aGlzLl9uYW1lfSBwaWN0dXJlYDtcbiAgfVxuXG4gIF9saWtlQ2FyZCgpIHtcbiAgICBpZiAodGhpcy5fcGxhY2VMaWtlQnV0dG9uLmNsYXNzTGlzdC5jb250YWlucyhcInBsYWNlX19sb3ZlLWJ1dHRvbl9hY3RpdmVcIikpIHtcbiAgICAgIHRoaXMuX2hhbmRsZVVubGlrZUNhcmQodGhpcy5fY2FyZElkLCB0aGlzLl9wbGFjZUxpa2VDb3VudCk7XG4gICAgICB0aGlzLl9wbGFjZUxpa2VCdXR0b24uY2xhc3NMaXN0LnJlbW92ZShcInBsYWNlX19sb3ZlLWJ1dHRvbl9hY3RpdmVcIik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2hhbmRsZUxpa2VDYXJkKHRoaXMuX2NhcmRJZCwgdGhpcy5fcGxhY2VMaWtlQ291bnQpO1xuICAgICAgdGhpcy5fcGxhY2VMaWtlQnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJwbGFjZV9fbG92ZS1idXR0b25fYWN0aXZlXCIpO1xuICAgIH1cbiAgfVxuXG4gIF9yZW1vdmVDYXJkID0gKCkgPT4ge1xuICAgIGNvbnN0IHBsYWNlVG9CZURlbGV0ZWQgPSB0aGlzLl9wbGFjZURlbGV0ZUJ1dHRvbi5jbG9zZXN0KFwiLnBsYWNlXCIpO1xuICAgIHBsYWNlVG9CZURlbGV0ZWQucmVtb3ZlKCk7XG4gIH07XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX3BsYWNlTGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5fbGlrZUNhcmQoKTtcbiAgICB9KTtcblxuICAgIC8vc2hvd3MgdGhlIGNvbmZpcm0gcG9wdXAgd2hlbiBpdHMgZGVsZXRlIGljb24gaXMgY2xpY2tlZFxuICAgIHRoaXMuX3BsYWNlRGVsZXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVEZWxldGUodGhpcy5fY2FyZElkLCB0aGlzLl9yZW1vdmVDYXJkKTtcbiAgICB9KTtcblxuICAgIC8vZmlsbHMgdGhlIHBvcHVwIHdpdGggdGhlIGltYWdlIGNsaWNrZWRcbiAgICAvL2FuZCBpdHMgbG9jYXRpb24sIHRoZW4gaXQgcmV2ZWFscyB0aGUgcG9wdXBcbiAgICB0aGlzLl9wbGFjZUltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVDbGljaygpO1xuICAgIH0pO1xuICB9XG5cbiAgZ2VuZXJhdGVDYXJkKCkge1xuICAgIHRoaXMuX2dldFBsYWNlRGV0YWlscygpO1xuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgcmV0dXJuIHRoaXMuX3BsYWNlO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcbiAgY29uc3RydWN0b3IoXG4gICAge1xuICAgICAgZm9ybVNlbGVjdG9yLFxuICAgICAgZmllbGRTZWxlY3RvcixcbiAgICAgIHN1Ym1pdEJ1dHRvblNlbGVjdG9yLFxuICAgICAgaW5hY3RpdmVCdXR0b25DbGFzcyxcbiAgICAgIGZpZWxkRXJyb3JDbGFzcyxcbiAgICAgIGVycm9yQ2xhc3MsXG4gICAgfSxcbiAgICBmb3JtRWxlbWVudFxuICApIHtcbiAgICB0aGlzLl9mb3JtU2VsZWN0b3IgPSBmb3JtU2VsZWN0b3I7XG4gICAgdGhpcy5fZmllbGRTZWxlY3RvciA9IGZpZWxkU2VsZWN0b3I7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBzdWJtaXRCdXR0b25TZWxlY3RvcjtcbiAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzID0gaW5hY3RpdmVCdXR0b25DbGFzcztcbiAgICB0aGlzLl9maWVsZEVycm9yQ2xhc3MgPSBmaWVsZEVycm9yQ2xhc3M7XG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IGVycm9yQ2xhc3M7XG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtRWxlbWVudDtcbiAgfVxuXG4gIF9zaG93RmllbGRFcnJvcihmaWVsZEVsZW1lbnQsIGVycm9yTWVzc2FnZSkge1xuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBgIyR7ZmllbGRFbGVtZW50LmlkfS1lcnJvcmBcbiAgICApO1xuXG4gICAgZmllbGRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fZmllbGRFcnJvckNsYXNzKTtcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBlcnJvck1lc3NhZ2U7XG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XG4gIH1cblxuICBfaGlkZUZpZWxkRXJyb3IoZmllbGRFbGVtZW50KSB7XG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIGAjJHtmaWVsZEVsZW1lbnQuaWR9LWVycm9yYFxuICAgICk7XG4gICAgZmllbGRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZmllbGRFcnJvckNsYXNzKTtcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xuICB9XG5cbiAgX2NoZWNrRmllbGRWYWxpZGl0eShmaWVsZEVsZW1lbnQpIHtcbiAgICBpZiAoIWZpZWxkRWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xuICAgICAgdGhpcy5fc2hvd0ZpZWxkRXJyb3IoZmllbGRFbGVtZW50LCBmaWVsZEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9oaWRlRmllbGRFcnJvcihmaWVsZEVsZW1lbnQpO1xuICAgIH1cbiAgfVxuXG4gIF9oYXNJbnZhbGlkRmllbGQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2ZpZWxkTGlzdC5zb21lKChmaWVsZEVsZW1lbnQpID0+ICFmaWVsZEVsZW1lbnQudmFsaWRpdHkudmFsaWQpO1xuICB9XG5cbiAgX3RvZ2dsZUJ1dHRvblN0YXRlKCkge1xuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkRmllbGQoKSkge1xuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKFwiZGlzYWJsZWRcIik7XG4gICAgfVxuICB9XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2ZpZWxkTGlzdCA9IEFycmF5LmZyb20oXG4gICAgICB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2ZpZWxkU2VsZWN0b3IpXG4gICAgKTtcblxuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3JcbiAgICApO1xuXG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICB0aGlzLl9maWVsZExpc3QuZm9yRWFjaCgoZmllbGRFbGVtZW50KSA9PiB7XG4gICAgICBmaWVsZEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcbiAgICAgICAgdGhpcy5fY2hlY2tGaWVsZFZhbGlkaXR5KGZpZWxkRWxlbWVudCk7XG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwicmVzZXRcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5fZmllbGRMaXN0LmZvckVhY2goKGZpZWxkRWxlbWVudCkgPT4ge1xuICAgICAgICBmaWVsZEVsZW1lbnQudmFsdWUgPSBcIlwiO1xuICAgICAgICB0aGlzLl9oaWRlRmllbGRFcnJvcihmaWVsZEVsZW1lbnQpO1xuICAgICAgfSk7XG4gICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgIH0pO1xuICB9XG5cbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xuICB9XG5cbiAgX2hhbmRsZUVzY0Nsb3NlID0gKGV2dCkgPT4ge1xuICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfVxuICB9O1xuICAvL2FkZHMgZXZlbnQgdG8gdGhlIGRvY3VtZW50XG4gIF9hZGRFdmVudFRvRG9jdW1lbnQoKSB7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG5cbiAgLy9yZW1vdmVzIGV2ZW50IHRvIHRoZSBkb2N1bWVudFxuICBfcmVtb3ZlRXZlbnRGcm9tRG9jdW1lbnQoKSB7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG5cbiAgb3BlbigpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcInBvcHVwX29wZW5lZFwiKTtcbiAgICB0aGlzLl9hZGRFdmVudFRvRG9jdW1lbnQoKTtcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwicG9wdXBfb3BlbmVkXCIpO1xuICAgIHRoaXMuX3JlbW92ZUV2ZW50RnJvbURvY3VtZW50KCk7XG4gIH1cblxuICBfaGFuZGxlQ2xpY2tPdXRzaWRlUG9wdXAgPSAoZXZ0KSA9PiB7XG4gICAgaWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwicG9wdXBfb3BlbmVkXCIpKSB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfVxuICB9O1xuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX2hhbmRsZUNsaWNrT3V0c2lkZVBvcHVwKTtcblxuICAgIHRoaXMuX3BvcHVwRWxlbWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Nsb3NlLWJ1dHRvblwiKVxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLmNsb3NlKCkpO1xuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IoY2FsbGJhY2ssIHBvcHVwU2VsZWN0b3IpIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9jYWxsYmFjayA9IGNhbGxiYWNrO1xuICAgIHRoaXMuX3BvcHVwRm9ybSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19mb3JtXCIpO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgc3VwZXIuY2xvc2UoKTtcbiAgICB0aGlzLl9wb3B1cEZvcm0ucmVzZXQoKTtcbiAgfVxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XG4gICAgdGhpcy5fZm9ybVZhbHVlcyA9IHt9O1xuICAgIHRoaXMuX3BvcHVwRm9ybVxuICAgICAgLnF1ZXJ5U2VsZWN0b3JBbGwoXCIucG9wdXBfX2ZpZWxkXCIpXG4gICAgICAuZm9yRWFjaCgoaW5wdXQpID0+ICh0aGlzLl9mb3JtVmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWUpKTtcbiAgfVxuXG4gIF9vblVwbG9hZCA9ICgpID0+IHtcbiAgICB0aGlzLnN1Ym1pdEJ1dHRvbiA9IHRoaXMuX3BvcHVwRm9ybS5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19zdWJtaXQtYnV0dG9uXCIpO1xuICAgIHRoaXMuc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gXCJTYXZpbmcuLi5cIjtcbiAgfTtcblxuICBfYWZ0ZXJVcGxvYWQgPSAoKSA9PiB7XG4gICAgdGhpcy5zdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSBcIlNhdmVcIjtcbiAgfTtcblxuICBfaGFuZGxlU3VibWl0RXZlbnQgPSAoZSkgPT4ge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB0aGlzLl9nZXRJbnB1dFZhbHVlcygpO1xuICAgIHRoaXMuX2NhbGxiYWNrKHRoaXMuX2Zvcm1WYWx1ZXMsIHRoaXMuX29uVXBsb2FkLCB0aGlzLl9hZnRlclVwbG9hZCk7XG4gIH07XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLl9wb3B1cEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCB0aGlzLl9oYW5kbGVTdWJtaXRFdmVudCk7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcbiAgb3Blbih7IG5hbWUsIGxpbmsgfSkge1xuICAgIGNvbnN0IHBvcHVwSW1hZ2UgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9faW1hZ2VcIik7XG4gICAgY29uc3QgcG9wdXBJbWFnZUxvY2F0aW9uID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBcIi5wb3B1cF9faW1hZ2UtbG9jYXRpb25cIlxuICAgICk7XG4gICAgcG9wdXBJbWFnZS5zcmMgPSBsaW5rO1xuICAgIHBvcHVwSW1hZ2UuYWx0ID0gYCR7bmFtZX0gcGljdHVyZWA7XG4gICAgcG9wdXBJbWFnZUxvY2F0aW9uLnRleHRDb250ZW50ID0gbmFtZTtcbiAgICBzdXBlci5vcGVuKCk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xuICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBjb250YWluZXJTZWxlY3Rvcikge1xuICAgIHRoaXMuX3JlbmRlcmVkSXRlbXMgPSBpdGVtcztcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xuICB9XG4gIGFkZEl0ZW0oZWxlbWVudCkge1xuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xuICB9XG4gIHJlbmRlckl0ZW1zKCkge1xuICAgIHRoaXMuX3JlbmRlcmVkSXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSk7XG4gICAgfSk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcbiAgY29uc3RydWN0b3IoeyBuYW1lU2VsZWN0b3IsIGpvYlNlbGVjdG9yLCBhdmF0YXJTZWxlY3RvciB9KSB7XG4gICAgdGhpcy5fbmFtZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG5hbWVTZWxlY3Rvcik7XG4gICAgdGhpcy5fam9iRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioam9iU2VsZWN0b3IpO1xuICAgIHRoaXMuX2F2YXRhckVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGF2YXRhclNlbGVjdG9yKTtcbiAgfVxuXG4gIC8vZGlzcGxheSB1c2VyJ3MgZGF0YSBpbiB0aGUgZm9ybVxuICBnZXRVc2VySW5mbygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgbmFtZTogdGhpcy5fbmFtZUVsZW1lbnQudGV4dENvbnRlbnQsXG4gICAgICBqb2I6IHRoaXMuX2pvYkVsZW1lbnQudGV4dENvbnRlbnQsXG4gICAgfTtcbiAgfVxuICAvL2FkZCBuZXcgZGF0YSB0byB0aGUgcGFnZVxuICBzZXRVc2VySW5mbyh7IHByb2ZpbGVOYW1lLCBwcm9maWxlSm9iLCBwcm9maWxlQXZhdGFyIH0pIHtcbiAgICBpZiAocHJvZmlsZU5hbWUgJiYgcHJvZmlsZUpvYiAmJiBwcm9maWxlQXZhdGFyKSB7XG4gICAgICB0aGlzLl9uYW1lRWxlbWVudC50ZXh0Q29udGVudCA9IHByb2ZpbGVOYW1lO1xuICAgICAgdGhpcy5fam9iRWxlbWVudC50ZXh0Q29udGVudCA9IHByb2ZpbGVKb2I7XG4gICAgICB0aGlzLl9hdmF0YXJFbGVtZW50LnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IGB1cmwoJHtwcm9maWxlQXZhdGFyfSlgO1xuICAgIH1cbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBpIHtcbiAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgIHRoaXMuX2Jhc2VVcmwgPSBvcHRpb25zLmJhc2VVcmw7XG4gICAgdGhpcy5faGVhZGVycyA9IG9wdGlvbnMuaGVhZGVycztcbiAgfVxuXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSkudGhlbigocmVzKSA9PiB7XG4gICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xuICAgIH0pO1xuICB9XG5cbiAgZ2V0SW5pdGlhbENhcmRzKCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSkudGhlbigocmVzKSA9PiB7XG4gICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xuICAgIH0pO1xuICB9XG5cbiAgdXBkYXRlVXNlckluZm8oaXRlbSkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgbmFtZTogaXRlbS5wcm9maWxlTmFtZSxcbiAgICAgICAgYWJvdXQ6IGl0ZW0ucHJvZmlsZUpvYixcbiAgICAgIH0pLFxuICAgIH0pLnRoZW4oKHJlcykgPT4ge1xuICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcbiAgICB9KTtcbiAgfVxuXG4gIHVwZGF0ZVVzZXJBdmF0YXIoaXRlbSkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZS9hdmF0YXJgLCB7XG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIGF2YXRhcjogaXRlbS5wcm9maWxlUGljdHVyZVVSTCxcbiAgICAgIH0pLFxuICAgIH0pLnRoZW4oKHJlcykgPT4ge1xuICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcbiAgICB9KTtcbiAgfVxuXG4gIHVwbG9hZFBsYWNlKGl0ZW0pIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgbmFtZTogaXRlbS5uYW1lLFxuICAgICAgICBsaW5rOiBpdGVtLmxpbmssXG4gICAgICB9KSxcbiAgICB9KS50aGVuKChyZXMpID0+IHtcbiAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgfSk7XG4gIH1cblxuICBkZWxldGVDYXJkKGNhcmRJZCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH1gLCB7XG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pLnRoZW4oKHJlcykgPT4ge1xuICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcbiAgICB9KTtcbiAgfVxuXG4gIGxpa2VDYXJkKGNhcmRJZCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy9saWtlcy8ke2NhcmRJZH1gLCB7XG4gICAgICBtZXRob2Q6IFwiUFVUXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pLnRoZW4oKHJlcykgPT4ge1xuICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcbiAgICB9KTtcbiAgfVxuXG4gIHVubGlrZUNhcmQoY2FyZElkKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzL2xpa2VzLyR7Y2FyZElkfWAsIHtcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSkudGhlbigocmVzKSA9PiB7XG4gICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xuICAgIH0pO1xuICB9XG59XG4iLCJleHBvcnQgY29uc3QgcHJvZmlsZVRpdGxlU2VsZWN0b3IgPSBcIi5wcm9maWxlX190aXRsZVwiO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVTdWJ0aXRsZVNlbGVjdG9yID0gXCIucHJvZmlsZV9fc3VidGl0bGVcIjtcbmV4cG9ydCBjb25zdCBwcm9maWxlQXZhdGFyU2VsZWN0b3IgPSBcIi5wcm9maWxlX19hdmF0YXJcIjtcblxuZXhwb3J0IGNvbnN0IHBvcHVwRmllbGRUaXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2ZpZWxkX2VsX3RpdGxlXCIpO1xuZXhwb3J0IGNvbnN0IHBvcHVwRmllbGRTdWJ0aXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gIFwiLnBvcHVwX19maWVsZF9lbF9zdWJ0aXRsZVwiXG4pO1xuXG5leHBvcnQgY29uc3QgcHJvZmlsZUFkZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ1dHRvblwiKTtcblxuZXhwb3J0IGNvbnN0IHBvcHVwRmllbGRQbGFjZVRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgXCIucG9wdXBfX2ZpZWxkX2VsX3BsYWNlLXRpdGxlXCJcbik7XG5leHBvcnQgY29uc3QgcG9wdXBGaWVsZFBsYWNlSW1hZ2VVUkwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICBcIi5wb3B1cF9fZmllbGRfZWxfcGxhY2UtaW1hZ2UtdXJsXCJcbik7XG5cbmV4cG9ydCBjb25zdCBwb3B1cEltYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9faW1hZ2VcIik7XG5leHBvcnQgY29uc3QgcG9wdXBJbWFnZUxvY2F0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgXCIucG9wdXBfX2ltYWdlLWxvY2F0aW9uXCJcbik7XG5cbmV4cG9ydCBjb25zdCBwcm9maWxlRWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gIFwiLnByb2ZpbGVfX2VkaXQtYnV0dG9uXCJcbik7XG5cbmV4cG9ydCBjb25zdCBwb3B1cENvbmZpcm1TdWJtaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICBcIi5wb3B1cF90eXBlX2NvbmZpcm0gLnBvcHVwX19zdWJtaXQtYnV0dG9uXCJcbik7XG5cbmV4cG9ydCBjb25zdCBwcm9maWxlT3ZlcmxheSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fb3ZlcmxheVwiKTtcblxuZXhwb3J0IGNvbnN0IGluaXRpYWxDYXJkcyA9IFtcbiAge1xuICAgIG5hbWU6IFwiWW9zZW1pdGUgVmFsbGV5XCIsXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS95b3NlbWl0ZS5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiTGFrZSBMb3Vpc2VcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2xha2UtbG91aXNlLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJCYWxkIE1vdW50YWluc1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvYmFsZC1tb3VudGFpbnMuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkxhdGVtYXJcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2xhdGVtYXIuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIlZhbm9pc2UgTmF0aW9uYWwgUGFya1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvdmFub2lzZS5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiTGFnbyBkaSBCcmFpZXNcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2xhZ28uanBnXCIsXG4gIH0sXG5dO1xuIiwiaW1wb3J0IENhcmQgZnJvbSBcIi4uL3NjcmlwdHMvY29tcG9uZW50cy9DYXJkLmpzXCI7XG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vc2NyaXB0cy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcbmltcG9ydCBQb3B1cCBmcm9tIFwiLi4vc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vc2NyaXB0cy9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vc2NyaXB0cy9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XG5pbXBvcnQgQXBpIGZyb20gXCIuLi9zY3JpcHRzL2NvbXBvbmVudHMvQXBpLmpzXCI7XG5cbmltcG9ydCB7XG4gIHByb2ZpbGVBZGRCdXR0b24sXG4gIHByb2ZpbGVFZGl0QnV0dG9uLFxuICBwb3B1cEZpZWxkVGl0bGUsXG4gIHBvcHVwRmllbGRTdWJ0aXRsZSxcbiAgcG9wdXBDb25maXJtU3VibWl0QnV0dG9uLFxuICBwcm9maWxlT3ZlcmxheSxcbiAgcHJvZmlsZVRpdGxlU2VsZWN0b3IsXG4gIHByb2ZpbGVTdWJ0aXRsZVNlbGVjdG9yLFxuICBwcm9maWxlQXZhdGFyU2VsZWN0b3IsXG59IGZyb20gXCIuLi9zY3JpcHRzL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xuXG5pbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xuXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyh7XG4gIG5hbWVTZWxlY3RvcjogcHJvZmlsZVRpdGxlU2VsZWN0b3IsXG4gIGpvYlNlbGVjdG9yOiBwcm9maWxlU3VidGl0bGVTZWxlY3RvcixcbiAgYXZhdGFyU2VsZWN0b3I6IHByb2ZpbGVBdmF0YXJTZWxlY3Rvcixcbn0pO1xuXG5jb25zdCBhcGkgPSBuZXcgQXBpKHtcbiAgYmFzZVVybDogXCJodHRwczovL2Fyb3VuZC5ub21vcmVwYXJ0aWVzLmNvL3YxL2dyb3VwLTExXCIsXG4gIGhlYWRlcnM6IHtcbiAgICBhdXRob3JpemF0aW9uOiBcIjQwM2JkYWZjLTBhNTItNGUwMi05YjgyLWM3ZThlNGY3ZmZiMVwiLFxuICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICB9LFxufSk7XG5cbmZ1bmN0aW9uIHNldFVzZXJEZXRhaWxzKHsgbmFtZSwgYWJvdXQsIGF2YXRhciB9KSB7XG4gIHVzZXJJbmZvLnNldFVzZXJJbmZvKHtcbiAgICBwcm9maWxlTmFtZTogbmFtZSxcbiAgICBwcm9maWxlSm9iOiBhYm91dCxcbiAgICBwcm9maWxlQXZhdGFyOiBhdmF0YXIsXG4gIH0pO1xufVxuXG5sZXQgdXNlcklkID0gXCJcIjtcbmxldCBjYXJkTGlzdCA9IFwiXCI7XG5cbmNvbnN0IGdldENhcmQgPSAoaXRlbSkgPT4ge1xuICBjb25zdCBjYXJkID0gbmV3IENhcmQoe1xuICAgIGRhdGE6IGl0ZW0sXG4gICAgdGVtcGxhdGVTZWxlY3RvcjogXCIjcGxhY2UtdGVtcGxhdGVcIixcbiAgICBoYW5kbGVDbGljazogKCkgPT4ge1xuICAgICAgaW1hZ2VQb3B1cC5vcGVuKGl0ZW0pO1xuICAgIH0sXG4gICAgaGFuZGxlRGVsZXRlOiAoY2FyZElkLCByZW1vdmVDYXJkKSA9PiB7XG4gICAgICBwb3B1cENvbmZpcm0ub3BlbigpO1xuICAgICAgcG9wdXBDb25maXJtU3VibWl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGFwaVxuICAgICAgICAgIC5kZWxldGVDYXJkKGNhcmRJZClcbiAgICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgICByZW1vdmVDYXJkKCk7XG4gICAgICAgICAgfSlcbiAgICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTsgLy8gbG9nIHRoZSBlcnJvciB0byB0aGUgY29uc29sZVxuICAgICAgICAgIH0pO1xuICAgICAgICBwb3B1cENvbmZpcm0uY2xvc2UoKTtcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgbGlrZUNhcmQ6IChjYXJkSWQsIHBsYWNlTGlrZUNvdW50KSA9PiB7XG4gICAgICBhcGlcbiAgICAgICAgLmxpa2VDYXJkKGNhcmRJZClcbiAgICAgICAgLnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgICAgICAgIHBsYWNlTGlrZUNvdW50LnRleHRDb250ZW50ID0gcmVzdWx0Lmxpa2VzLmxlbmd0aDtcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICB9KTtcbiAgICB9LFxuICAgIHVubGlrZUNhcmQ6IChjYXJkSWQsIHBsYWNlTGlrZUNvdW50KSA9PiB7XG4gICAgICBhcGlcbiAgICAgICAgLnVubGlrZUNhcmQoY2FyZElkKVxuICAgICAgICAudGhlbigocmVzdWx0KSA9PiB7XG4gICAgICAgICAgcGxhY2VMaWtlQ291bnQudGV4dENvbnRlbnQgPSByZXN1bHQubGlrZXMubGVuZ3RoO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICAgIH0pO1xuICAgIH0sXG4gICAgdXNlcklkLFxuICB9KTtcbiAgcmV0dXJuIGNhcmQuZ2VuZXJhdGVDYXJkKCk7XG59O1xuXG5jb25zdCBjcmVhdGVDYXJkID0gKGl0ZW0pID0+IHtcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBnZXRDYXJkKGl0ZW0pO1xuICBjYXJkTGlzdC5hZGRJdGVtKGNhcmRFbGVtZW50KTtcbn07XG5cblByb21pc2UuYWxsKFthcGkuZ2V0VXNlckluZm8oKSwgYXBpLmdldEluaXRpYWxDYXJkcygpXSlcbiAgLnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgIHNldFVzZXJEZXRhaWxzKHJlc3VsdFswXSk7XG4gICAgdXNlcklkID0gcmVzdWx0WzBdLl9pZDtcbiAgICBjYXJkTGlzdCA9IG5ldyBTZWN0aW9uKFxuICAgICAge1xuICAgICAgICBpdGVtczogcmVzdWx0WzFdLFxuICAgICAgICByZW5kZXJlcjogKGl0ZW0pID0+IHtcbiAgICAgICAgICBjcmVhdGVDYXJkKGl0ZW0pO1xuICAgICAgICB9LFxuICAgICAgfSxcbiAgICAgIFwiLnBsYWNlc1wiXG4gICAgKTtcblxuICAgIGlmICh1c2VySWQpIHtcbiAgICAgIGNhcmRMaXN0LnJlbmRlckl0ZW1zKCk7XG4gICAgfVxuICB9KVxuICAuY2F0Y2goKGVycikgPT4ge1xuICAgIGNvbnNvbGUubG9nKGVycik7IC8vIGxvZyB0aGUgZXJyb3IgdG8gdGhlIGNvbnNvbGVcbiAgfSk7XG5cbmNvbnN0IGltYWdlUG9wdXAgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoXCIucG9wdXBfdHlwZV9pbWFnZVwiKTtcblxuY29uc3QgcG9wdXBGb3JtTGlzdCA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5wb3B1cF9fZm9ybVwiKSk7XG5cbnBvcHVwRm9ybUxpc3QuZm9yRWFjaCgoZm9ybUVsZW1lbnQpID0+IHtcbiAgY29uc3QgZm9ybVRvQmVWYWxpZGF0ZWQgPSBuZXcgRm9ybVZhbGlkYXRvcihcbiAgICB7XG4gICAgICBmb3JtU2VsZWN0b3I6IFwiLnBvcHVwX19mb3JtXCIsXG4gICAgICBmaWVsZFNlbGVjdG9yOiBcIi5wb3B1cF9fZmllbGRcIixcbiAgICAgIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5wb3B1cF9fc3VibWl0LWJ1dHRvblwiLFxuICAgICAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJwb3B1cF9fc3VibWl0LWJ1dHRvbl9kaXNhYmxlZFwiLFxuICAgICAgZmllbGRFcnJvckNsYXNzOiBcInBvcHVwX19maWVsZF90eXBlX2Vycm9yXCIsXG4gICAgICBlcnJvckNsYXNzOiBcInBvcHVwX19maWVsZC1lcnJvcl9hY3RpdmVcIixcbiAgICB9LFxuICAgIGZvcm1FbGVtZW50XG4gICk7XG4gIGZvcm1Ub0JlVmFsaWRhdGVkLmVuYWJsZVZhbGlkYXRpb24oKTtcbn0pO1xuXG5jb25zdCBwb3B1cEFkZFBsYWNlID0gbmV3IFBvcHVwV2l0aEZvcm0oKGl0ZW0sIG9uVXBsb2FkLCBhZnRlclVwbG9hZCkgPT4ge1xuICBvblVwbG9hZCgpO1xuICBhcGlcbiAgICAudXBsb2FkUGxhY2UoeyBuYW1lOiBpdGVtLnBsYWNlTmFtZSwgbGluazogaXRlbS5wbGFjZUltYWdlVVJMIH0pXG4gICAgLnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgICAgY3JlYXRlQ2FyZChyZXN1bHQpO1xuICAgICAgcG9wdXBBZGRQbGFjZS5jbG9zZSgpO1xuICAgIH0pXG4gICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgfSlcbiAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICBhZnRlclVwbG9hZCgpO1xuICAgIH0pO1xufSwgXCIucG9wdXBfdHlwZV9hZGRcIik7XG5cbmNvbnN0IHBvcHVwRWRpdFByb2ZpbGUgPSBuZXcgUG9wdXBXaXRoRm9ybSgoaXRlbSwgb25VcGxvYWQsIGFmdGVyVXBsb2FkKSA9PiB7XG4gIG9uVXBsb2FkKCk7XG4gIGFwaVxuICAgIC51cGRhdGVVc2VySW5mbyhpdGVtKVxuICAgIC50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgIHNldFVzZXJEZXRhaWxzKHJlc3VsdCk7XG4gICAgICBwb3B1cEVkaXRQcm9maWxlLmNsb3NlKCk7XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICB9KVxuICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgIGFmdGVyVXBsb2FkKCk7XG4gICAgfSk7XG59LCBcIi5wb3B1cF90eXBlX2VkaXRcIik7XG5cbmNvbnN0IHBvcHVwVXBkYXRlQXZhdGFyID0gbmV3IFBvcHVwV2l0aEZvcm0oKGl0ZW0sIG9uVXBsb2FkLCBhZnRlclVwbG9hZCkgPT4ge1xuICBvblVwbG9hZCgpO1xuICBhcGlcbiAgICAudXBkYXRlVXNlckF2YXRhcihpdGVtKVxuICAgIC50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgIC8vY29uc29sZS5sb2cocmVzdWx0KTtcbiAgICAgIHNldFVzZXJEZXRhaWxzKHJlc3VsdCk7XG4gICAgICBwb3B1cFVwZGF0ZUF2YXRhci5jbG9zZSgpO1xuICAgIH0pXG4gICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKGVycik7IC8vIGxvZyB0aGUgZXJyb3IgdG8gdGhlIGNvbnNvbGVcbiAgICB9KVxuICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgIGFmdGVyVXBsb2FkKCk7XG4gICAgfSk7XG59LCBcIi5wb3B1cF90eXBlX2NoYW5nZVwiKTtcblxuY29uc3QgcG9wdXBDb25maXJtID0gbmV3IFBvcHVwKFwiLnBvcHVwX3R5cGVfY29uZmlybVwiKTtcblxucG9wdXBBZGRQbGFjZS5zZXRFdmVudExpc3RlbmVycygpO1xucG9wdXBFZGl0UHJvZmlsZS5zZXRFdmVudExpc3RlbmVycygpO1xucG9wdXBVcGRhdGVBdmF0YXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbmltYWdlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbnBvcHVwQ29uZmlybS5zZXRFdmVudExpc3RlbmVycygpO1xuXG5wcm9maWxlRWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xuICBwb3B1cEVkaXRQcm9maWxlLm9wZW4oKTtcblxuICBjb25zdCB7IG5hbWUsIGpvYiB9ID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcbiAgcG9wdXBGaWVsZFRpdGxlLnZhbHVlID0gbmFtZTtcbiAgcG9wdXBGaWVsZFN1YnRpdGxlLnZhbHVlID0gam9iO1xufSk7XG5cbnByb2ZpbGVBZGRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcbiAgcG9wdXBBZGRQbGFjZS5vcGVuKCk7XG59KTtcblxucHJvZmlsZU92ZXJsYXkuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcbiAgcG9wdXBVcGRhdGVBdmF0YXIub3BlbigpO1xufSk7XG4iXSwibmFtZXMiOlsiQ2FyZCIsImRhdGEiLCJ0ZW1wbGF0ZVNlbGVjdG9yIiwiaGFuZGxlQ2xpY2siLCJoYW5kbGVEZWxldGUiLCJsaWtlQ2FyZCIsInVubGlrZUNhcmQiLCJ1c2VySWQiLCJfcGxhY2VEZWxldGVCdXR0b24iLCJjbG9zZXN0IiwicmVtb3ZlIiwidGhpcyIsIl9uYW1lIiwibmFtZSIsIl9saW5rIiwibGluayIsIl9saWtlcyIsImxpa2VzIiwiX2NhcmRJZCIsIl9pZCIsIl9vd25lciIsIm93bmVyIiwiX3VzZXJJZCIsIl90ZW1wbGF0ZVNlbGVjdG9yIiwiX2hhbmRsZUNsaWNrIiwiX2hhbmRsZURlbGV0ZSIsIl9oYW5kbGVMaWtlQ2FyZCIsIl9oYW5kbGVVbmxpa2VDYXJkIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY29udGVudCIsImNsb25lTm9kZSIsIl9wbGFjZSIsIl9nZXRQbGFjZUVsZW1lbnQiLCJfcGxhY2VUaXRsZSIsIl9wbGFjZUltYWdlIiwiX3BsYWNlTGlrZUJ1dHRvbiIsIl9wbGFjZUxpa2VDb3VudCIsImNsYXNzTGlzdCIsImFkZCIsInNvbWUiLCJpdGVtIiwidGV4dENvbnRlbnQiLCJsZW5ndGgiLCJzcmMiLCJhbHQiLCJjb250YWlucyIsImFkZEV2ZW50TGlzdGVuZXIiLCJfbGlrZUNhcmQiLCJfcmVtb3ZlQ2FyZCIsIl9nZXRQbGFjZURldGFpbHMiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJGb3JtVmFsaWRhdG9yIiwiZm9ybUVsZW1lbnQiLCJmb3JtU2VsZWN0b3IiLCJmaWVsZFNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiZmllbGRFcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsIl9mb3JtU2VsZWN0b3IiLCJfZmllbGRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2ZpZWxkRXJyb3JDbGFzcyIsIl9lcnJvckNsYXNzIiwiX2Zvcm1FbGVtZW50IiwiZmllbGRFbGVtZW50IiwiZXJyb3JNZXNzYWdlIiwiZXJyb3JFbGVtZW50IiwiaWQiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hpZGVGaWVsZEVycm9yIiwiX3Nob3dGaWVsZEVycm9yIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfZmllbGRMaXN0IiwiX2hhc0ludmFsaWRGaWVsZCIsIl9idXR0b25FbGVtZW50IiwiZGlzYWJsZWQiLCJyZW1vdmVBdHRyaWJ1dGUiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiZm9yRWFjaCIsIl9jaGVja0ZpZWxkVmFsaWRpdHkiLCJ2YWx1ZSIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsImV2dCIsImtleSIsImNsb3NlIiwidGFyZ2V0IiwiX3BvcHVwRWxlbWVudCIsIl9oYW5kbGVFc2NDbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJfYWRkRXZlbnRUb0RvY3VtZW50IiwiX3JlbW92ZUV2ZW50RnJvbURvY3VtZW50IiwiX2hhbmRsZUNsaWNrT3V0c2lkZVBvcHVwIiwiUG9wdXBXaXRoRm9ybSIsImNhbGxiYWNrIiwic3VibWl0QnV0dG9uIiwiX3BvcHVwRm9ybSIsImUiLCJwcmV2ZW50RGVmYXVsdCIsIl9nZXRJbnB1dFZhbHVlcyIsIl9jYWxsYmFjayIsIl9mb3JtVmFsdWVzIiwiX29uVXBsb2FkIiwiX2FmdGVyVXBsb2FkIiwicmVzZXQiLCJpbnB1dCIsIl9oYW5kbGVTdWJtaXRFdmVudCIsIlBvcHVwV2l0aEltYWdlIiwicG9wdXBJbWFnZSIsInBvcHVwSW1hZ2VMb2NhdGlvbiIsIlNlY3Rpb24iLCJjb250YWluZXJTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfcmVuZGVyZWRJdGVtcyIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJlbGVtZW50IiwicHJlcGVuZCIsIlVzZXJJbmZvIiwibmFtZVNlbGVjdG9yIiwiam9iU2VsZWN0b3IiLCJhdmF0YXJTZWxlY3RvciIsIl9uYW1lRWxlbWVudCIsIl9qb2JFbGVtZW50IiwiX2F2YXRhckVsZW1lbnQiLCJqb2IiLCJwcm9maWxlTmFtZSIsInByb2ZpbGVKb2IiLCJwcm9maWxlQXZhdGFyIiwic3R5bGUiLCJiYWNrZ3JvdW5kSW1hZ2UiLCJBcGkiLCJvcHRpb25zIiwiX2Jhc2VVcmwiLCJiYXNlVXJsIiwiX2hlYWRlcnMiLCJoZWFkZXJzIiwiZmV0Y2giLCJ0aGVuIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiYWJvdXQiLCJhdmF0YXIiLCJwcm9maWxlUGljdHVyZVVSTCIsImNhcmRJZCIsInBvcHVwRmllbGRUaXRsZSIsInBvcHVwRmllbGRTdWJ0aXRsZSIsInByb2ZpbGVBZGRCdXR0b24iLCJwcm9maWxlRWRpdEJ1dHRvbiIsInBvcHVwQ29uZmlybVN1Ym1pdEJ1dHRvbiIsInByb2ZpbGVPdmVybGF5IiwidXNlckluZm8iLCJhcGkiLCJhdXRob3JpemF0aW9uIiwic2V0VXNlckRldGFpbHMiLCJzZXRVc2VySW5mbyIsImNhcmRMaXN0IiwiY3JlYXRlQ2FyZCIsImNhcmRFbGVtZW50IiwiaW1hZ2VQb3B1cCIsIm9wZW4iLCJyZW1vdmVDYXJkIiwicG9wdXBDb25maXJtIiwiZGVsZXRlQ2FyZCIsImNhdGNoIiwiZXJyIiwiY29uc29sZSIsImxvZyIsInBsYWNlTGlrZUNvdW50IiwicmVzdWx0IiwiZ2VuZXJhdGVDYXJkIiwiZ2V0Q2FyZCIsImFkZEl0ZW0iLCJhbGwiLCJnZXRVc2VySW5mbyIsImdldEluaXRpYWxDYXJkcyIsInJlbmRlckl0ZW1zIiwiZW5hYmxlVmFsaWRhdGlvbiIsInBvcHVwQWRkUGxhY2UiLCJvblVwbG9hZCIsImFmdGVyVXBsb2FkIiwidXBsb2FkUGxhY2UiLCJwbGFjZU5hbWUiLCJwbGFjZUltYWdlVVJMIiwiZmluYWxseSIsInBvcHVwRWRpdFByb2ZpbGUiLCJ1cGRhdGVVc2VySW5mbyIsInBvcHVwVXBkYXRlQXZhdGFyIiwidXBkYXRlVXNlckF2YXRhciIsInNldEV2ZW50TGlzdGVuZXJzIl0sInNvdXJjZVJvb3QiOiIifQ==