!function(){"use strict";function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var t=function(){function t(e){var n,o,r=this,i=e.data,a=e.templateSelector,c=e.handleClick,l=e.handleDelete,u=e.likeCard,s=e.unlikeCard,f=e.userId;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=function(){r._placeDeleteButton.closest(".place").remove()},(n="_removeCard")in this?Object.defineProperty(this,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):this[n]=o,this._name=i.name,this._link=i.link,this._likes=i.likes,this._cardId=i._id,this._owner=i.owner,this._userId=f,this._templateSelector=a,this._handleClick=c,this._handleDelete=l,this._handleLikeCard=u,this._handleUnlikeCard=s}var n,o;return n=t,(o=[{key:"_getPlaceElement",value:function(){return document.querySelector(this._templateSelector).content.querySelector(".place").cloneNode(!0)}},{key:"_getPlaceDetails",value:function(){var e=this;this._place=this._getPlaceElement(),this._placeTitle=this._place.querySelector(".place__title"),this._placeImage=this._place.querySelector(".place__image"),this._placeLikeButton=this._place.querySelector(".place__love-button"),this._placeLikeCount=this._place.querySelector(".place__love-count"),this._placeDeleteButton=this._place.querySelector(".place__delete-button"),this._owner._id!==this._userId&&this._placeDeleteButton.classList.add("hidden"),this._likes.some((function(t){return t._id===e._userId}))&&this._placeLikeButton.classList.add("place__love-button_active"),this._placeLikeCount.textContent=this._likes.length,this._placeTitle.textContent=this._name,this._placeImage.src=this._link,this._placeImage.alt="".concat(this._name," picture")}},{key:"_likeCard",value:function(){var e=this;this._placeLikeButton.classList.contains("place__love-button_active")?(this._handleUnlikeCard(this._cardId).then((function(t){e._placeLikeCount.textContent=t.likes.length})).catch((function(e){console.log(e)})),this._placeLikeButton.classList.remove("place__love-button_active")):(this._handleLikeCard(this._cardId).then((function(t){e._placeLikeCount.textContent=t.likes.length})).catch((function(e){console.log(e)})),this._placeLikeButton.classList.add("place__love-button_active"))}},{key:"_setEventListeners",value:function(){var e=this;this._placeLikeButton.addEventListener("click",(function(){e._likeCard()})),this._placeDeleteButton.addEventListener("click",(function(){e._handleDelete(e._cardId,e._removeCard)})),this._placeImage.addEventListener("click",(function(){e._handleClick()}))}},{key:"generateCard",value:function(){return this._getPlaceDetails(),this._setEventListeners(),this._place}}])&&e(n.prototype,o),t}();function n(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var o=function(){function e(t,n){var o=t.formSelector,r=t.fieldSelector,i=t.submitButtonSelector,a=t.inactiveButtonClass,c=t.fieldErrorClass,l=t.errorClass;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._formSelector=o,this._fieldSelector=r,this._submitButtonSelector=i,this._inactiveButtonClass=a,this._fieldErrorClass=c,this._errorClass=l,this._formElement=n}var t,o;return t=e,(o=[{key:"_showFieldError",value:function(e,t){var n=this._formElement.querySelector("#".concat(e.id,"-error"));e.classList.add(this._fieldErrorClass),n.textContent=t,n.classList.add(this._errorClass)}},{key:"_hideFieldError",value:function(e){var t=this._formElement.querySelector("#".concat(e.id,"-error"));e.classList.remove(this._fieldErrorClass),t.classList.remove(this._errorClass),t.textContent=""}},{key:"_checkFieldValidity",value:function(e){e.validity.valid?this._hideFieldError(e):this._showFieldError(e,e.validationMessage)}},{key:"_hasInvalidField",value:function(){return this._fieldList.some((function(e){return!e.validity.valid}))}},{key:"_toggleButtonState",value:function(){this._hasInvalidField()?(this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.disabled=!0):(this._buttonElement.classList.remove(this._inactiveButtonClass),this._buttonElement.removeAttribute("disabled"))}},{key:"_setEventListeners",value:function(){var e=this;this._fieldList=Array.from(this._formElement.querySelectorAll(this._fieldSelector)),this._buttonElement=this._formElement.querySelector(this._submitButtonSelector),this._toggleButtonState(),this._fieldList.forEach((function(t){t.addEventListener("input",(function(){e._checkFieldValidity(t),e._toggleButtonState()}))})),this._formElement.addEventListener("reset",(function(){e._fieldList.forEach((function(t){t.value="",e._hideFieldError(t)})),e._toggleButtonState()}))}},{key:"enableValidation",value:function(){this._setEventListeners()}}])&&n(t.prototype,o),e}();function r(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i(this,"_handleEscClose",(function(e){"Escape"===e.key&&n.close()})),i(this,"_handleClickOutsidePopup",(function(e){e.target.classList.contains("popup_opened")&&n.close()})),this._popupElement=document.querySelector(t)}var t,n;return t=e,(n=[{key:"_addEventToDocument",value:function(){document.addEventListener("keydown",this._handleEscClose)}},{key:"_removeEventFromDocument",value:function(){document.removeEventListener("keydown",this._handleEscClose)}},{key:"open",value:function(){this._popupElement.classList.add("popup_opened"),this._addEventToDocument()}},{key:"close",value:function(){this._popupElement.classList.remove("popup_opened"),this._removeEventFromDocument()}},{key:"setEventListeners",value:function(){var e=this;this._popupElement.addEventListener("click",this._handleClickOutsidePopup),this._popupElement.querySelector(".popup__close-button").addEventListener("click",(function(){return e.close()}))}}])&&r(t.prototype,n),e}();function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function l(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function u(e,t,n){return u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=h(e)););return e}(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(n):r.value}},u(e,t,n||e)}function s(e,t){return s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},s(e,t)}function f(e,t){if(t&&("object"===c(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return p(e)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(a,e);var t,n,o,r,i=(o=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=h(o);if(r){var n=h(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return f(this,e)});function a(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),_(p(n=i.call(this,t)),"_onUpload",(function(){n.submitButton=n._popupForm.querySelector(".popup__submit-button"),n.submitButton.textContent="Saving..."})),_(p(n),"_afterUpload",(function(){n.submitButton.textContent="Save"})),_(p(n),"_handleSubmitEvent",(function(e){e.preventDefault(),n._getInputValues(),n._callback(n._formValues,n._onUpload,n._afterUpload),n.close()})),n._callback=e,n._popupForm=n._popupElement.querySelector(".popup__form"),n}return t=a,(n=[{key:"close",value:function(){u(h(a.prototype),"close",this).call(this),this._popupForm.reset()}},{key:"_getInputValues",value:function(){var e=this;this._formValues={},this._popupForm.querySelectorAll(".popup__field").forEach((function(t){return e._formValues[t.name]=t.value}))}},{key:"setEventListeners",value:function(){u(h(a.prototype),"setEventListeners",this).call(this),this._popupForm.addEventListener("submit",this._handleSubmitEvent)}}])&&l(t.prototype,n),a}(a);function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function b(e,t,n){return b="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=g(e)););return e}(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(n):r.value}},b(e,t,n||e)}function k(e,t){return k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},k(e,t)}function E(e,t){if(t&&("object"===m(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}var S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}(a,e);var t,n,o,r,i=(o=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=g(o);if(r){var n=g(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return E(this,e)});function a(){return v(this,a),i.apply(this,arguments)}return t=a,(n=[{key:"open",value:function(e){var t=e.name,n=e.link,o=this._popupElement.querySelector(".popup__image"),r=this._popupElement.querySelector(".popup__image-location");o.src=n,o.alt="".concat(t," picture"),r.textContent=t,b(g(a.prototype),"open",this).call(this)}}])&&y(t.prototype,n),a}(a);function C(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var w=function(){function e(t,n){var o=t.items,r=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderedItems=o,this._renderer=r,this._container=document.querySelector(n)}var t,n;return t=e,(n=[{key:"addItem",value:function(e){this._container.append(e)}},{key:"renderItems",value:function(){var e=this;this._renderedItems.forEach((function(t){e._renderer(t)}))}}])&&C(t.prototype,n),e}();function L(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var j=function(){function e(t){var n=t.nameSelector,o=t.jobSelector,r=t.avatarSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._nameElement=document.querySelector(n),this._jobElement=document.querySelector(o),this._avatarElement=document.querySelector(r)}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{name:this._nameElement.textContent,job:this._jobElement.textContent}}},{key:"setUserInfo",value:function(e){var t=e.profileName,n=e.profileJob,o=e.profileAvatar;this._nameElement.textContent=t,this._jobElement.textContent=n,this._avatarElement.style.backgroundImage="url(".concat(o,")")}}])&&L(t.prototype,n),e}();function P(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var O=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._baseUrl=t.baseUrl,this._headers=t.headers}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return fetch("".concat(this._baseUrl,"/users/me"),{headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}},{key:"getInitialCards",value:function(){return fetch("".concat(this._baseUrl,"/cards"),{headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}},{key:"updateUserInfo",value:function(e){return fetch("".concat(this._baseUrl,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e.profileName,about:e.profileJob})}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}},{key:"updateUserAvatar",value:function(e){return fetch("".concat(this._baseUrl,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e.profilePictureURL})}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}},{key:"uploadPlace",value:function(e){return fetch("".concat(this._baseUrl,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify({name:e.name,link:e.link})}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}},{key:"deleteCard",value:function(e){return fetch("".concat(this._baseUrl,"/cards/").concat(e),{method:"DELETE",headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}},{key:"likeCard",value:function(e){return fetch("".concat(this._baseUrl,"/cards/likes/").concat(e),{method:"PUT",headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}},{key:"unlikeCard",value:function(e){return fetch("".concat(this._baseUrl,"/cards/likes/").concat(e),{method:"DELETE",headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}}])&&P(t.prototype,n),e}(),I=document.querySelector(".popup__field_el_title"),q=document.querySelector(".popup__field_el_subtitle"),B=document.querySelector(".profile__add-button"),U=(document.querySelector(".popup__field_el_place-title"),document.querySelector(".popup__field_el_place-image-url"),document.querySelector(".popup__image"),document.querySelector(".popup__image-location"),document.querySelector(".profile__edit-button")),T=document.querySelector(".popup_type_confirm .popup__submit-button"),D=document.querySelector(".profile__overlay"),R=new j({nameSelector:".profile__title",jobSelector:".profile__subtitle",avatarSelector:".profile__avatar"}),x=new O({baseUrl:"https://around.nomoreparties.co/v1/group-11",headers:{authorization:"403bdafc-0a52-4e02-9b82-c7e8e4f7ffb1","Content-Type":"application/json"}});function F(e){var t=e.name,n=e.about,o=e.avatar;R.setUserInfo({profileName:t,profileJob:n,profileAvatar:o})}var A="";x.getUserInfo().then((function(e){console.log(e),F(e),A=e._id})).catch((function(e){console.log(e)}));var V="";x.getInitialCards().then((function(e){console.log(e),(V=new w({items:e,renderer:function(e){N(e)}},".places")).renderItems()})).catch((function(e){console.log(e)}));var N=function(e){var n=function(e){return new t({data:e,templateSelector:"#place-template",handleClick:function(){J.open(e)},handleDelete:function(e,t){G.open(),T.addEventListener("click",(function(n){n.preventDefault(),x.deleteCard(e).then((function(){t()})).catch((function(e){console.log(e)})),G.close()}))},likeCard:function(e){return x.likeCard(e)},unlikeCard:function(e){return x.unlikeCard(e)},userId:A}).generateCard()}(e);V.addItem(n)},J=new S(".popup_type_image");Array.from(document.querySelectorAll(".popup__form")).forEach((function(e){new o({formSelector:".popup__form",fieldSelector:".popup__field",submitButtonSelector:".popup__submit-button",inactiveButtonClass:"popup__submit-button_disabled",fieldErrorClass:"popup__field_type_error",errorClass:"popup__field-error_active"},e).enableValidation()}));var H=new d((function(e,t,n){t(),x.uploadPlace({name:e.placeName,link:e.placeImageURL}).then((function(e){N(e)})).catch((function(e){console.log(e)})).finally((function(){n()}))}),".popup_type_add"),z=new d((function(e,t,n){t(),x.updateUserInfo(e).then((function(e){F(e)})).catch((function(e){console.log(e)})).finally((function(){n()}))}),".popup_type_edit"),M=new d((function(e,t,n){t(),x.updateUserAvatar(e).then((function(e){console.log(e),F(e)})).catch((function(e){console.log(e)})).finally((function(){n()}))}),".popup_type_change"),G=new a(".popup_type_confirm");H.setEventListeners(),z.setEventListeners(),M.setEventListeners(),J.setEventListeners(),G.setEventListeners(),U.addEventListener("click",(function(){z.open();var e=R.getUserInfo(),t=e.name,n=e.job;I.value=t,q.value=n})),B.addEventListener("click",(function(){H.open()})),D.addEventListener("click",(function(){M.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsIm1hcHBpbmdzIjoibU1BQXFCQSxFQUFBQSxXQUNuQixjQVFHLEksSUFBQSxPQVBEQyxFQU9DLEVBUERBLEtBQ0FDLEVBTUMsRUFOREEsaUJBQ0FDLEVBS0MsRUFMREEsWUFDQUMsRUFJQyxFQUpEQSxhQUNBQyxFQUdDLEVBSERBLFNBQ0FDLEVBRUMsRUFGREEsV0FDQUMsRUFDQyxFQUREQSxRLDRGQUNDLFMsRUFtRVcsV0FDYSxFQUFLQyxtQkFBbUJDLFFBQVEsVUFDeENDLFcsRUFyRWhCLHNCLHNCQUFBLEssdURBQUEsSyxLQUNEQyxLQUFLQyxNQUFRWCxFQUFLWSxLQUNsQkYsS0FBS0csTUFBUWIsRUFBS2MsS0FDbEJKLEtBQUtLLE9BQVNmLEVBQUtnQixNQUNuQk4sS0FBS08sUUFBVWpCLEVBQUtrQixJQUNwQlIsS0FBS1MsT0FBU25CLEVBQUtvQixNQUNuQlYsS0FBS1csUUFBVWYsRUFDZkksS0FBS1ksa0JBQW9CckIsRUFDekJTLEtBQUthLGFBQWVyQixFQUNwQlEsS0FBS2MsY0FBZ0JyQixFQUNyQk8sS0FBS2UsZ0JBQWtCckIsRUFDdkJNLEtBQUtnQixrQkFBb0JyQixFLHFEQUczQixXQUtFLE9BSnFCc0IsU0FDbEJDLGNBQWNsQixLQUFLWSxtQkFDbkJPLFFBQVFELGNBQWMsVUFDdEJFLFdBQVUsSyw4QkFJZixXQUFtQixXQUNqQnBCLEtBQUtxQixPQUFTckIsS0FBS3NCLG1CQUNuQnRCLEtBQUt1QixZQUFjdkIsS0FBS3FCLE9BQU9ILGNBQWMsaUJBQzdDbEIsS0FBS3dCLFlBQWN4QixLQUFLcUIsT0FBT0gsY0FBYyxpQkFDN0NsQixLQUFLeUIsaUJBQW1CekIsS0FBS3FCLE9BQU9ILGNBQWMsdUJBQ2xEbEIsS0FBSzBCLGdCQUFrQjFCLEtBQUtxQixPQUFPSCxjQUFjLHNCQUNqRGxCLEtBQUtILG1CQUFxQkcsS0FBS3FCLE9BQU9ILGNBQ3BDLHlCQUdFbEIsS0FBS1MsT0FBT0QsTUFBUVIsS0FBS1csU0FDM0JYLEtBQUtILG1CQUFtQjhCLFVBQVVDLElBQUksVUFHcEM1QixLQUFLSyxPQUFPd0IsTUFBSyxTQUFDQyxHQUFELE9BQVVBLEVBQUt0QixNQUFRLEVBQUtHLFlBQy9DWCxLQUFLeUIsaUJBQWlCRSxVQUFVQyxJQUFJLDZCQUV0QzVCLEtBQUswQixnQkFBZ0JLLFlBQWMvQixLQUFLSyxPQUFPMkIsT0FDL0NoQyxLQUFLdUIsWUFBWVEsWUFBYy9CLEtBQUtDLE1BQ3BDRCxLQUFLd0IsWUFBWVMsSUFBTWpDLEtBQUtHLE1BQzVCSCxLQUFLd0IsWUFBWVUsSUFBakIsVUFBMEJsQyxLQUFLQyxNQUEvQixjLHVCQUdGLFdBQVksV0FDTkQsS0FBS3lCLGlCQUFpQkUsVUFBVVEsU0FBUyw4QkFDM0NuQyxLQUFLZ0Isa0JBQWtCaEIsS0FBS08sU0FDekI2QixNQUFLLFNBQUNDLEdBQ0wsRUFBS1gsZ0JBQWdCSyxZQUFjTSxFQUFPL0IsTUFBTTBCLFVBRWpETSxPQUFNLFNBQUNDLEdBQ05DLFFBQVFDLElBQUlGLE1BRWhCdkMsS0FBS3lCLGlCQUFpQkUsVUFBVTVCLE9BQU8sK0JBRXZDQyxLQUFLZSxnQkFBZ0JmLEtBQUtPLFNBQ3ZCNkIsTUFBSyxTQUFDQyxHQUNMLEVBQUtYLGdCQUFnQkssWUFBY00sRUFBTy9CLE1BQU0wQixVQUVqRE0sT0FBTSxTQUFDQyxHQUNOQyxRQUFRQyxJQUFJRixNQUVoQnZDLEtBQUt5QixpQkFBaUJFLFVBQVVDLElBQUksZ0MsZ0NBU3hDLFdBQXFCLFdBQ25CNUIsS0FBS3lCLGlCQUFpQmlCLGlCQUFpQixTQUFTLFdBQzlDLEVBQUtDLGVBSVAzQyxLQUFLSCxtQkFBbUI2QyxpQkFBaUIsU0FBUyxXQUNoRCxFQUFLNUIsY0FBYyxFQUFLUCxRQUFTLEVBQUtxQyxnQkFLeEM1QyxLQUFLd0IsWUFBWWtCLGlCQUFpQixTQUFTLFdBQ3pDLEVBQUs3QixvQiwwQkFJVCxXQUdFLE9BRkFiLEtBQUs2QyxtQkFDTDdDLEtBQUs4QyxxQkFDRTlDLEtBQUtxQixZLG1CQXJHS2hDLEcsMEtDQUEwRCxFQUFBQSxXQUNuQixhQVNFQyxHQUNBLElBUkVDLEVBUUYsRUFSRUEsYUFDQUMsRUFPRixFQVBFQSxjQUNBQyxFQU1GLEVBTkVBLHFCQUNBQyxFQUtGLEVBTEVBLG9CQUNBQyxFQUlGLEVBSkVBLGdCQUNBQyxFQUdGLEVBSEVBLFksNEZBR0YsU0FDQXRELEtBQUt1RCxjQUFnQk4sRUFDckJqRCxLQUFLd0QsZUFBaUJOLEVBQ3RCbEQsS0FBS3lELHNCQUF3Qk4sRUFDN0JuRCxLQUFLMEQscUJBQXVCTixFQUM1QnBELEtBQUsyRCxpQkFBbUJOLEVBQ3hCckQsS0FBSzRELFlBQWNOLEVBQ25CdEQsS0FBSzZELGFBQWViLEUsb0RBR3RCLFNBQWdCYyxFQUFjQyxHQUM1QixJQUFNQyxFQUFlaEUsS0FBSzZELGFBQWEzQyxjQUFsQixXQUNmNEMsRUFBYUcsR0FERSxXQUlyQkgsRUFBYW5DLFVBQVVDLElBQUk1QixLQUFLMkQsa0JBQ2hDSyxFQUFhakMsWUFBY2dDLEVBQzNCQyxFQUFhckMsVUFBVUMsSUFBSTVCLEtBQUs0RCxlLDZCQUdsQyxTQUFnQkUsR0FDZCxJQUFNRSxFQUFlaEUsS0FBSzZELGFBQWEzQyxjQUFsQixXQUNmNEMsRUFBYUcsR0FERSxXQUdyQkgsRUFBYW5DLFVBQVU1QixPQUFPQyxLQUFLMkQsa0JBQ25DSyxFQUFhckMsVUFBVTVCLE9BQU9DLEtBQUs0RCxhQUNuQ0ksRUFBYWpDLFlBQWMsSyxpQ0FHN0IsU0FBb0IrQixHQUNiQSxFQUFhSSxTQUFTQyxNQUd6Qm5FLEtBQUtvRSxnQkFBZ0JOLEdBRnJCOUQsS0FBS3FFLGdCQUFnQlAsRUFBY0EsRUFBYVEscUIsOEJBTXBELFdBQ0UsT0FBT3RFLEtBQUt1RSxXQUFXMUMsTUFBSyxTQUFDaUMsR0FBRCxPQUFtQkEsRUFBYUksU0FBU0MsVyxnQ0FHdkUsV0FDTW5FLEtBQUt3RSxvQkFDUHhFLEtBQUt5RSxlQUFlOUMsVUFBVUMsSUFBSTVCLEtBQUswRCxzQkFDdkMxRCxLQUFLeUUsZUFBZUMsVUFBVyxJQUUvQjFFLEtBQUt5RSxlQUFlOUMsVUFBVTVCLE9BQU9DLEtBQUswRCxzQkFDMUMxRCxLQUFLeUUsZUFBZUUsZ0JBQWdCLGUsZ0NBSXhDLFdBQXFCLFdBQ25CM0UsS0FBS3VFLFdBQWFLLE1BQU1DLEtBQ3RCN0UsS0FBSzZELGFBQWFpQixpQkFBaUI5RSxLQUFLd0QsaUJBRzFDeEQsS0FBS3lFLGVBQWlCekUsS0FBSzZELGFBQWEzQyxjQUN0Q2xCLEtBQUt5RCx1QkFHUHpELEtBQUsrRSxxQkFDTC9FLEtBQUt1RSxXQUFXUyxTQUFRLFNBQUNsQixHQUN2QkEsRUFBYXBCLGlCQUFpQixTQUFTLFdBQ3JDLEVBQUt1QyxvQkFBb0JuQixHQUN6QixFQUFLaUIsMkJBR1QvRSxLQUFLNkQsYUFBYW5CLGlCQUFpQixTQUFTLFdBQzFDLEVBQUs2QixXQUFXUyxTQUFRLFNBQUNsQixHQUN2QkEsRUFBYW9CLE1BQVEsR0FDckIsRUFBS2QsZ0JBQWdCTixNQUV2QixFQUFLaUIsMEIsOEJBSVQsV0FDRS9FLEtBQUs4QywwQixtQkF4RllDLEcsa1NDQUFvQyxFQUFBQSxXQUNuQixXQUFZQyxHQUFlLFksNEZBQUEsbUNBSVQsU0FBQ0MsR0FDRCxXQUFaQSxFQUFJQyxLQUNOLEVBQUtDLFdBTmtCLG1DQTZCQSxTQUFDRixHQUN0QkEsRUFBSUcsT0FBTzdELFVBQVVRLFNBQVMsaUJBQ2hDLEVBQUtvRCxXQTlCUHZGLEtBQUt5RixjQUFnQnhFLFNBQVNDLGNBQWNrRSxHLHdEQVM5QyxXQUNFbkUsU0FBU3lCLGlCQUFpQixVQUFXMUMsS0FBSzBGLG1CLHNDQUk1QyxXQUNFekUsU0FBUzBFLG9CQUFvQixVQUFXM0YsS0FBSzBGLG1CLGtCQUcvQyxXQUNFMUYsS0FBS3lGLGNBQWM5RCxVQUFVQyxJQUFJLGdCQUNqQzVCLEtBQUs0Rix3QixtQkFHUCxXQUNFNUYsS0FBS3lGLGNBQWM5RCxVQUFVNUIsT0FBTyxnQkFDcENDLEtBQUs2Riw2QiwrQkFRUCxXQUFvQixXQUNsQjdGLEtBQUt5RixjQUFjL0MsaUJBQWlCLFFBQVMxQyxLQUFLOEYsMEJBRWxEOUYsS0FBS3lGLGNBQ0Z2RSxjQUFjLHdCQUNkd0IsaUJBQWlCLFNBQVMsa0JBQU0sRUFBSzZDLGdCLG1CQXhDdkJKLEcsMnpDQ0VBWSxFQUFBQSxTQUFBQSxJLDBvQkFDbkIsV0FBWUMsRUFBVVosR0FBZSxhLDRGQUFBLGFBQ25DLGNBQU1BLElBRDZCLGFBaUJ6QixXQUNWLEVBQUthLGFBQWUsRUFBS0MsV0FBV2hGLGNBQWMseUJBQ2xELEVBQUsrRSxhQUFhbEUsWUFBYyxlQW5CRyx1QkFzQnRCLFdBQ2IsRUFBS2tFLGFBQWFsRSxZQUFjLFVBdkJHLDZCQTBCaEIsU0FBQ29FLEdBQ3BCQSxFQUFFQyxpQkFDRixFQUFLQyxrQkFFTCxFQUFLQyxVQUFVLEVBQUtDLFlBQWEsRUFBS0MsVUFBVyxFQUFLQyxjQUN0RCxFQUFLbEIsV0E3QkwsRUFBS2UsVUFBWU4sRUFDakIsRUFBS0UsV0FBYSxFQUFLVCxjQUFjdkUsY0FBYyxnQkFIaEIsRSxrQ0FNckMsV0FDRSwwQ0FDQWxCLEtBQUtrRyxXQUFXUSxVLDZCQUVsQixXQUFrQixXQUNoQjFHLEtBQUt1RyxZQUFjLEdBQ25CdkcsS0FBS2tHLFdBQ0ZwQixpQkFBaUIsaUJBQ2pCRSxTQUFRLFNBQUMyQixHQUFELE9BQVksRUFBS0osWUFBWUksRUFBTXpHLE1BQVF5RyxFQUFNekIsVywrQkFvQjlELFdBQ0Usc0RBQ0FsRixLQUFLa0csV0FBV3hELGlCQUFpQixTQUFVMUMsS0FBSzRHLHlCLG1CQXJDL0JiLENBQXNCWixHLDh4Q0NBdEIwQixFQUFBQSxTQUFBQSxJLGl1QkFDbkIsWUFBcUIsSUFBZDNHLEVBQWMsRUFBZEEsS0FBTUUsRUFBUSxFQUFSQSxLQUNMMEcsRUFBYTlHLEtBQUt5RixjQUFjdkUsY0FBYyxpQkFDOUM2RixFQUFxQi9HLEtBQUt5RixjQUFjdkUsY0FDNUMsMEJBRUY0RixFQUFXN0UsSUFBTTdCLEVBQ2pCMEcsRUFBVzVFLElBQVgsVUFBb0JoQyxFQUFwQixZQUNBNkcsRUFBbUJoRixZQUFjN0IsRUFDakMsOEMsbUJBVGlCMkcsQ0FBdUIxQixHLDBLQ0Z2QjZCLEVBQUFBLFdBQ25CLGFBQWlDQyxHQUFtQixJQUF0Q0MsRUFBc0MsRUFBdENBLE1BQU9DLEVBQStCLEVBQS9CQSxVLDRGQUErQixTQUNsRG5ILEtBQUtvSCxlQUFpQkYsRUFDdEJsSCxLQUFLcUgsVUFBWUYsRUFDakJuSCxLQUFLc0gsV0FBYXJHLFNBQVNDLGNBQWMrRixHLDRDQUUzQyxTQUFRTSxHQUNOdkgsS0FBS3NILFdBQVdFLE9BQU9ELEsseUJBRXpCLFdBQWMsV0FDWnZILEtBQUtvSCxlQUFlcEMsU0FBUSxTQUFDbEQsR0FDM0IsRUFBS3VGLFVBQVV2RixXLG1CQVhBa0YsRywwS0NBQVMsRUFBQUEsV0FDbkIsY0FBMkQsSUFBN0NDLEVBQTZDLEVBQTdDQSxhQUFjQyxFQUErQixFQUEvQkEsWUFBYUMsRUFBa0IsRUFBbEJBLGdCLDRGQUFrQixTQUN6RDVILEtBQUs2SCxhQUFlNUcsU0FBU0MsY0FBY3dHLEdBQzNDMUgsS0FBSzhILFlBQWM3RyxTQUFTQyxjQUFjeUcsR0FDMUMzSCxLQUFLK0gsZUFBaUI5RyxTQUFTQyxjQUFjMEcsRyxnREFJL0MsV0FDRSxNQUFPLENBQ0wxSCxLQUFNRixLQUFLNkgsYUFBYTlGLFlBQ3hCaUcsSUFBS2hJLEtBQUs4SCxZQUFZL0YsZSx5QkFJMUIsWUFBd0QsSUFBMUNrRyxFQUEwQyxFQUExQ0EsWUFBYUMsRUFBNkIsRUFBN0JBLFdBQVlDLEVBQWlCLEVBQWpCQSxjQUNyQ25JLEtBQUs2SCxhQUFhOUYsWUFBY2tHLEVBQ2hDakksS0FBSzhILFlBQVkvRixZQUFjbUcsRUFDL0JsSSxLQUFLK0gsZUFBZUssTUFBTUMsZ0JBQTFCLGNBQW1ERixFQUFuRCxVLG1CQWxCaUJWLEcsMEtDQUFhLEVBQUFBLFdBQ25CLFdBQVlDLEksNEZBQVMsU0FDbkJ2SSxLQUFLd0ksU0FBV0QsRUFBUUUsUUFDeEJ6SSxLQUFLMEksU0FBV0gsRUFBUUksUSxnREFHMUIsV0FDRSxPQUFPQyxNQUFNLEdBQUQsT0FBSTVJLEtBQUt3SSxTQUFULGFBQThCLENBQ3hDRyxRQUFTM0ksS0FBSzBJLFdBQ2J0RyxNQUFLLFNBQUN5RyxHQUNQLE9BQUlBLEVBQUlDLEdBQ0NELEVBQUlFLE9BRU5DLFFBQVFDLE9BQVIsaUJBQXlCSixFQUFJSyxjLDZCQUl4QyxXQUNFLE9BQU9OLE1BQU0sR0FBRCxPQUFJNUksS0FBS3dJLFNBQVQsVUFBMkIsQ0FDckNHLFFBQVMzSSxLQUFLMEksV0FDYnRHLE1BQUssU0FBQ3lHLEdBQ1AsT0FBSUEsRUFBSUMsR0FDQ0QsRUFBSUUsT0FFTkMsUUFBUUMsT0FBUixpQkFBeUJKLEVBQUlLLGMsNEJBSXhDLFNBQWVwSCxHQUNiLE9BQU84RyxNQUFNLEdBQUQsT0FBSTVJLEtBQUt3SSxTQUFULGFBQThCLENBQ3hDVyxPQUFRLFFBQ1JSLFFBQVMzSSxLQUFLMEksU0FDZFUsS0FBTUMsS0FBS0MsVUFBVSxDQUNuQnBKLEtBQU00QixFQUFLbUcsWUFDWHNCLE1BQU96SCxFQUFLb0csZUFFYjlGLE1BQUssU0FBQ3lHLEdBQ1AsT0FBSUEsRUFBSUMsR0FDQ0QsRUFBSUUsT0FFTkMsUUFBUUMsT0FBUixpQkFBeUJKLEVBQUlLLGMsOEJBSXhDLFNBQWlCcEgsR0FDZixPQUFPOEcsTUFBTSxHQUFELE9BQUk1SSxLQUFLd0ksU0FBVCxvQkFBcUMsQ0FDL0NXLE9BQVEsUUFDUlIsUUFBUzNJLEtBQUswSSxTQUNkVSxLQUFNQyxLQUFLQyxVQUFVLENBQ25CRSxPQUFRMUgsRUFBSzJILHNCQUVkckgsTUFBSyxTQUFDeUcsR0FDUCxPQUFJQSxFQUFJQyxHQUNDRCxFQUFJRSxPQUVOQyxRQUFRQyxPQUFSLGlCQUF5QkosRUFBSUssYyx5QkFJeEMsU0FBWXBILEdBQ1YsT0FBTzhHLE1BQU0sR0FBRCxPQUFJNUksS0FBS3dJLFNBQVQsVUFBMkIsQ0FDckNXLE9BQVEsT0FDUlIsUUFBUzNJLEtBQUswSSxTQUNkVSxLQUFNQyxLQUFLQyxVQUFVLENBQ25CcEosS0FBTTRCLEVBQUs1QixLQUNYRSxLQUFNMEIsRUFBSzFCLFNBRVpnQyxNQUFLLFNBQUN5RyxHQUNQLE9BQUlBLEVBQUlDLEdBQ0NELEVBQUlFLE9BRU5DLFFBQVFDLE9BQVIsaUJBQXlCSixFQUFJSyxjLHdCQUl4QyxTQUFXUSxHQUNULE9BQU9kLE1BQU0sR0FBRCxPQUFJNUksS0FBS3dJLFNBQVQsa0JBQTJCa0IsR0FBVSxDQUMvQ1AsT0FBUSxTQUNSUixRQUFTM0ksS0FBSzBJLFdBQ2J0RyxNQUFLLFNBQUN5RyxHQUNQLE9BQUlBLEVBQUlDLEdBQ0NELEVBQUlFLE9BRU5DLFFBQVFDLE9BQVIsaUJBQXlCSixFQUFJSyxjLHNCQUl4QyxTQUFTUSxHQUNQLE9BQU9kLE1BQU0sR0FBRCxPQUFJNUksS0FBS3dJLFNBQVQsd0JBQWlDa0IsR0FBVSxDQUNyRFAsT0FBUSxNQUNSUixRQUFTM0ksS0FBSzBJLFdBQ2J0RyxNQUFLLFNBQUN5RyxHQUNQLE9BQUlBLEVBQUlDLEdBQ0NELEVBQUlFLE9BRU5DLFFBQVFDLE9BQVIsaUJBQXlCSixFQUFJSyxjLHdCQUl4QyxTQUFXUSxHQUNULE9BQU9kLE1BQU0sR0FBRCxPQUFJNUksS0FBS3dJLFNBQVQsd0JBQWlDa0IsR0FBVSxDQUNyRFAsT0FBUSxTQUNSUixRQUFTM0ksS0FBSzBJLFdBQ2J0RyxNQUFLLFNBQUN5RyxHQUNQLE9BQUlBLEVBQUlDLEdBQ0NELEVBQUlFLE9BRU5DLFFBQVFDLE9BQVIsaUJBQXlCSixFQUFJSyxpQixtQkEzR3JCWixHQ0FScUIsRUFBa0IxSSxTQUFTQyxjQUFjLDBCQUN6QzBJLEVBQXFCM0ksU0FBU0MsY0FDekMsNkJBR1cySSxFQUFtQjVJLFNBQVNDLGNBQWMsd0JBYzFDNEksR0FadUI3SSxTQUFTQyxjQUMzQyxnQ0FFcUNELFNBQVNDLGNBQzlDLG9DQUd3QkQsU0FBU0MsY0FBYyxpQkFDZkQsU0FBU0MsY0FDekMsMEJBRytCRCxTQUFTQyxjQUN4QywwQkFHVzZJLEVBQTJCOUksU0FBU0MsY0FDL0MsNkNBR1c4SSxFQUFpQi9JLFNBQVNDLGNBQWMscUJDUC9DK0ksRUFBVyxJQUFJeEMsRUFBUyxDQUM1QkMsYUFBYyxrQkFDZEMsWUFBYSxxQkFDYkMsZUFBZ0IscUJBR1pzQyxFQUFNLElBQUk1QixFQUFJLENBQ2xCRyxRQUFTLDhDQUNURSxRQUFTLENBQ1B3QixjQUFlLHVDQUNmLGVBQWdCLHNCQUlwQixTQUFTQyxFQUFULEdBQWlELElBQXZCbEssRUFBdUIsRUFBdkJBLEtBQU1xSixFQUFpQixFQUFqQkEsTUFBT0MsRUFBVSxFQUFWQSxPQUNyQ1MsRUFBU0ksWUFBWSxDQUNuQnBDLFlBQWEvSCxFQUNiZ0ksV0FBWXFCLEVBQ1pwQixjQUFlcUIsSUFJbkIsSUFBSTVKLEVBQVMsR0FDYnNLLEVBQ0dJLGNBQ0FsSSxNQUFLLFNBQUNDLEdBQ0xHLFFBQVFDLElBQUlKLEdBQ1orSCxFQUFlL0gsR0FDZnpDLEVBQVN5QyxFQUFPN0IsT0FFakI4QixPQUFNLFNBQUNDLEdBQ05DLFFBQVFDLElBQUlGLE1BR2hCLElBQUlnSSxFQUFXLEdBRWZMLEVBQ0dNLGtCQUNBcEksTUFBSyxTQUFDQyxHQUNMRyxRQUFRQyxJQUFJSixJQUVaa0ksRUFBVyxJQUFJdkQsRUFDYixDQUNFRSxNQUhpQjdFLEVBSWpCOEUsU0FBVSxTQUFDckYsR0FDVDJJLEVBQVczSSxLQUdmLFlBR080SSxpQkFFVnBJLE9BQU0sU0FBQ0MsR0FDTkMsUUFBUUMsSUFBSUYsTUFHaEIsSUFpQ01rSSxFQUFhLFNBQUMzSSxHQUNsQixJQUFNNkksRUFsQ1EsU0FBQzdJLEdBOEJmLE9BN0JhLElBQUl6QyxFQUFLLENBQ3BCQyxLQUFNd0MsRUFDTnZDLGlCQUFrQixrQkFDbEJDLFlBQWEsV0FDWG9MLEVBQVdDLEtBQUsvSSxJQUVsQnJDLGFBQWMsU0FBQ2lLLEVBQVFvQixHQUNyQkMsRUFBYUYsT0FDYmQsRUFBeUJySCxpQkFBaUIsU0FBUyxTQUFDeUQsR0FDbERBLEVBQUVDLGlCQUNGOEQsRUFDR2MsV0FBV3RCLEdBQ1h0SCxNQUFLLFdBQ0owSSxPQUVEeEksT0FBTSxTQUFDQyxHQUNOQyxRQUFRQyxJQUFJRixNQUVoQndJLEVBQWF4RixZQUdqQjdGLFNBQVUsU0FBQ2dLLEdBQ1QsT0FBT1EsRUFBSXhLLFNBQVNnSyxJQUV0Qi9KLFdBQVksU0FBQytKLEdBQ1gsT0FBT1EsRUFBSXZLLFdBQVcrSixJQUV4QjlKLE9BQUFBLElBRVVxTCxlQUlRQyxDQUFRcEosR0FDNUJ5SSxFQUFTWSxRQUFRUixJQUdiQyxFQUFhLElBQUkvRCxFQUFlLHFCQUVoQmpDLE1BQU1DLEtBQUs1RCxTQUFTNkQsaUJBQWlCLGlCQUU3Q0UsU0FBUSxTQUFDaEMsR0FDSyxJQUFJRCxFQUM1QixDQUNFRSxhQUFjLGVBQ2RDLGNBQWUsZ0JBQ2ZDLHFCQUFzQix3QkFDdEJDLG9CQUFxQixnQ0FDckJDLGdCQUFpQiwwQkFDakJDLFdBQVksNkJBRWROLEdBRWdCb0ksc0JBR3BCLElBQU1DLEVBQVcsSUFBSXRGLEdBQWMsU0FBQ2pFLEVBQU13SixFQUFVQyxHQUNsREQsSUFDQXBCLEVBQ0dzQixZQUFZLENBQUV0TCxLQUFNNEIsRUFBSzJKLFVBQVdyTCxLQUFNMEIsRUFBSzRKLGdCQUMvQ3RKLE1BQUssU0FBQ0MsR0FFTG9JLEVBQVdwSSxNQUVaQyxPQUFNLFNBQUNDLEdBQ05DLFFBQVFDLElBQUlGLE1BRWJvSixTQUFRLFdBQ1BKLFNBRUgsbUJBRUdLLEVBQVksSUFBSTdGLEdBQWMsU0FBQ2pFLEVBQU13SixFQUFVQyxHQUNuREQsSUFDQXBCLEVBQ0cyQixlQUFlL0osR0FDZk0sTUFBSyxTQUFDQyxHQUVMK0gsRUFBZS9ILE1BRWhCQyxPQUFNLFNBQUNDLEdBQ05DLFFBQVFDLElBQUlGLE1BRWJvSixTQUFRLFdBQ1BKLFNBRUgsb0JBRUdPLEVBQWMsSUFBSS9GLEdBQWMsU0FBQ2pFLEVBQU13SixFQUFVQyxHQUNyREQsSUFDQXBCLEVBQ0c2QixpQkFBaUJqSyxHQUNqQk0sTUFBSyxTQUFDQyxHQUNMRyxRQUFRQyxJQUFJSixHQUNaK0gsRUFBZS9ILE1BRWhCQyxPQUFNLFNBQUNDLEdBQ05DLFFBQVFDLElBQUlGLE1BRWJvSixTQUFRLFdBQ1BKLFNBRUgsc0JBRUdSLEVBQWUsSUFBSTVGLEVBQU0sdUJBRS9Ca0csRUFBU1csb0JBQ1RKLEVBQVVJLG9CQUNWRixFQUFZRSxvQkFDWnBCLEVBQVdvQixvQkFDWGpCLEVBQWFpQixvQkFFYmxDLEVBQWtCcEgsaUJBQWlCLFNBQVMsV0FDMUNrSixFQUFVZixPQUVWLE1BQXNCWixFQUFTSyxjQUF2QnBLLEVBQVIsRUFBUUEsS0FBTThILEVBQWQsRUFBY0EsSUFDZDJCLEVBQWdCekUsTUFBUWhGLEVBQ3hCMEosRUFBbUIxRSxNQUFROEMsS0FHN0I2QixFQUFpQm5ILGlCQUFpQixTQUFTLFdBQ3pDMkksRUFBU1IsVUFHWGIsRUFBZXRILGlCQUFpQixTQUFTLFdBQ3ZDb0osRUFBWWpCLFUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL0FwaS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3NjcmlwdHMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvcGFnZXMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XG4gIGNvbnN0cnVjdG9yKHtcbiAgICBkYXRhLFxuICAgIHRlbXBsYXRlU2VsZWN0b3IsXG4gICAgaGFuZGxlQ2xpY2ssXG4gICAgaGFuZGxlRGVsZXRlLFxuICAgIGxpa2VDYXJkLFxuICAgIHVubGlrZUNhcmQsXG4gICAgdXNlcklkLFxuICB9KSB7XG4gICAgdGhpcy5fbmFtZSA9IGRhdGEubmFtZTtcbiAgICB0aGlzLl9saW5rID0gZGF0YS5saW5rO1xuICAgIHRoaXMuX2xpa2VzID0gZGF0YS5saWtlcztcbiAgICB0aGlzLl9jYXJkSWQgPSBkYXRhLl9pZDtcbiAgICB0aGlzLl9vd25lciA9IGRhdGEub3duZXI7XG4gICAgdGhpcy5fdXNlcklkID0gdXNlcklkO1xuICAgIHRoaXMuX3RlbXBsYXRlU2VsZWN0b3IgPSB0ZW1wbGF0ZVNlbGVjdG9yO1xuICAgIHRoaXMuX2hhbmRsZUNsaWNrID0gaGFuZGxlQ2xpY2s7XG4gICAgdGhpcy5faGFuZGxlRGVsZXRlID0gaGFuZGxlRGVsZXRlO1xuICAgIHRoaXMuX2hhbmRsZUxpa2VDYXJkID0gbGlrZUNhcmQ7XG4gICAgdGhpcy5faGFuZGxlVW5saWtlQ2FyZCA9IHVubGlrZUNhcmQ7XG4gIH1cblxuICBfZ2V0UGxhY2VFbGVtZW50KCkge1xuICAgIGNvbnN0IHBsYWNlRWxlbWVudCA9IGRvY3VtZW50XG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl90ZW1wbGF0ZVNlbGVjdG9yKVxuICAgICAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5wbGFjZVwiKVxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcbiAgICByZXR1cm4gcGxhY2VFbGVtZW50O1xuICB9XG5cbiAgX2dldFBsYWNlRGV0YWlscygpIHtcbiAgICB0aGlzLl9wbGFjZSA9IHRoaXMuX2dldFBsYWNlRWxlbWVudCgpO1xuICAgIHRoaXMuX3BsYWNlVGl0bGUgPSB0aGlzLl9wbGFjZS5xdWVyeVNlbGVjdG9yKFwiLnBsYWNlX190aXRsZVwiKTtcbiAgICB0aGlzLl9wbGFjZUltYWdlID0gdGhpcy5fcGxhY2UucXVlcnlTZWxlY3RvcihcIi5wbGFjZV9faW1hZ2VcIik7XG4gICAgdGhpcy5fcGxhY2VMaWtlQnV0dG9uID0gdGhpcy5fcGxhY2UucXVlcnlTZWxlY3RvcihcIi5wbGFjZV9fbG92ZS1idXR0b25cIik7XG4gICAgdGhpcy5fcGxhY2VMaWtlQ291bnQgPSB0aGlzLl9wbGFjZS5xdWVyeVNlbGVjdG9yKFwiLnBsYWNlX19sb3ZlLWNvdW50XCIpO1xuICAgIHRoaXMuX3BsYWNlRGVsZXRlQnV0dG9uID0gdGhpcy5fcGxhY2UucXVlcnlTZWxlY3RvcihcbiAgICAgIFwiLnBsYWNlX19kZWxldGUtYnV0dG9uXCJcbiAgICApO1xuXG4gICAgaWYgKHRoaXMuX293bmVyLl9pZCAhPT0gdGhpcy5fdXNlcklkKSB7XG4gICAgICB0aGlzLl9wbGFjZURlbGV0ZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwiaGlkZGVuXCIpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9saWtlcy5zb21lKChpdGVtKSA9PiBpdGVtLl9pZCA9PT0gdGhpcy5fdXNlcklkKSkge1xuICAgICAgdGhpcy5fcGxhY2VMaWtlQnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJwbGFjZV9fbG92ZS1idXR0b25fYWN0aXZlXCIpO1xuICAgIH1cbiAgICB0aGlzLl9wbGFjZUxpa2VDb3VudC50ZXh0Q29udGVudCA9IHRoaXMuX2xpa2VzLmxlbmd0aDtcbiAgICB0aGlzLl9wbGFjZVRpdGxlLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcbiAgICB0aGlzLl9wbGFjZUltYWdlLnNyYyA9IHRoaXMuX2xpbms7XG4gICAgdGhpcy5fcGxhY2VJbWFnZS5hbHQgPSBgJHt0aGlzLl9uYW1lfSBwaWN0dXJlYDtcbiAgfVxuXG4gIF9saWtlQ2FyZCgpIHtcbiAgICBpZiAodGhpcy5fcGxhY2VMaWtlQnV0dG9uLmNsYXNzTGlzdC5jb250YWlucyhcInBsYWNlX19sb3ZlLWJ1dHRvbl9hY3RpdmVcIikpIHtcbiAgICAgIHRoaXMuX2hhbmRsZVVubGlrZUNhcmQodGhpcy5fY2FyZElkKVxuICAgICAgICAudGhlbigocmVzdWx0KSA9PiB7XG4gICAgICAgICAgdGhpcy5fcGxhY2VMaWtlQ291bnQudGV4dENvbnRlbnQgPSByZXN1bHQubGlrZXMubGVuZ3RoO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICAgIH0pO1xuICAgICAgdGhpcy5fcGxhY2VMaWtlQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJwbGFjZV9fbG92ZS1idXR0b25fYWN0aXZlXCIpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9oYW5kbGVMaWtlQ2FyZCh0aGlzLl9jYXJkSWQpXG4gICAgICAgIC50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgICAgICB0aGlzLl9wbGFjZUxpa2VDb3VudC50ZXh0Q29udGVudCA9IHJlc3VsdC5saWtlcy5sZW5ndGg7XG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgICAgfSk7XG4gICAgICB0aGlzLl9wbGFjZUxpa2VCdXR0b24uY2xhc3NMaXN0LmFkZChcInBsYWNlX19sb3ZlLWJ1dHRvbl9hY3RpdmVcIik7XG4gICAgfVxuICB9XG5cbiAgX3JlbW92ZUNhcmQgPSAoKSA9PiB7XG4gICAgY29uc3QgcGxhY2VUb0JlRGVsZXRlZCA9IHRoaXMuX3BsYWNlRGVsZXRlQnV0dG9uLmNsb3Nlc3QoXCIucGxhY2VcIik7XG4gICAgcGxhY2VUb0JlRGVsZXRlZC5yZW1vdmUoKTtcbiAgfTtcblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fcGxhY2VMaWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLl9saWtlQ2FyZCgpO1xuICAgIH0pO1xuXG4gICAgLy9zaG93cyB0aGUgY29uZmlybSBwb3B1cCB3aGVuIGl0cyBkZWxldGUgaWNvbiBpcyBjbGlja2VkXG4gICAgdGhpcy5fcGxhY2VEZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZSh0aGlzLl9jYXJkSWQsIHRoaXMuX3JlbW92ZUNhcmQpO1xuICAgIH0pO1xuXG4gICAgLy9maWxscyB0aGUgcG9wdXAgd2l0aCB0aGUgaW1hZ2UgY2xpY2tlZFxuICAgIC8vYW5kIGl0cyBsb2NhdGlvbiwgdGhlbiBpdCByZXZlYWxzIHRoZSBwb3B1cFxuICAgIHRoaXMuX3BsYWNlSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuX2hhbmRsZUNsaWNrKCk7XG4gICAgfSk7XG4gIH1cblxuICBnZW5lcmF0ZUNhcmQoKSB7XG4gICAgdGhpcy5fZ2V0UGxhY2VEZXRhaWxzKCk7XG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICByZXR1cm4gdGhpcy5fcGxhY2U7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuICBjb25zdHJ1Y3RvcihcbiAgICB7XG4gICAgICBmb3JtU2VsZWN0b3IsXG4gICAgICBmaWVsZFNlbGVjdG9yLFxuICAgICAgc3VibWl0QnV0dG9uU2VsZWN0b3IsXG4gICAgICBpbmFjdGl2ZUJ1dHRvbkNsYXNzLFxuICAgICAgZmllbGRFcnJvckNsYXNzLFxuICAgICAgZXJyb3JDbGFzcyxcbiAgICB9LFxuICAgIGZvcm1FbGVtZW50XG4gICkge1xuICAgIHRoaXMuX2Zvcm1TZWxlY3RvciA9IGZvcm1TZWxlY3RvcjtcbiAgICB0aGlzLl9maWVsZFNlbGVjdG9yID0gZmllbGRTZWxlY3RvcjtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IHN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBpbmFjdGl2ZUJ1dHRvbkNsYXNzO1xuICAgIHRoaXMuX2ZpZWxkRXJyb3JDbGFzcyA9IGZpZWxkRXJyb3JDbGFzcztcbiAgICB0aGlzLl9lcnJvckNsYXNzID0gZXJyb3JDbGFzcztcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGZvcm1FbGVtZW50O1xuICB9XG5cbiAgX3Nob3dGaWVsZEVycm9yKGZpZWxkRWxlbWVudCwgZXJyb3JNZXNzYWdlKSB7XG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIGAjJHtmaWVsZEVsZW1lbnQuaWR9LWVycm9yYFxuICAgICk7XG5cbiAgICBmaWVsZEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9maWVsZEVycm9yQ2xhc3MpO1xuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcbiAgfVxuXG4gIF9oaWRlRmllbGRFcnJvcihmaWVsZEVsZW1lbnQpIHtcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgYCMke2ZpZWxkRWxlbWVudC5pZH0tZXJyb3JgXG4gICAgKTtcbiAgICBmaWVsZEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9maWVsZEVycm9yQ2xhc3MpO1xuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XG4gIH1cblxuICBfY2hlY2tGaWVsZFZhbGlkaXR5KGZpZWxkRWxlbWVudCkge1xuICAgIGlmICghZmllbGRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgICB0aGlzLl9zaG93RmllbGRFcnJvcihmaWVsZEVsZW1lbnQsIGZpZWxkRWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2hpZGVGaWVsZEVycm9yKGZpZWxkRWxlbWVudCk7XG4gICAgfVxuICB9XG5cbiAgX2hhc0ludmFsaWRGaWVsZCgpIHtcbiAgICByZXR1cm4gdGhpcy5fZmllbGRMaXN0LnNvbWUoKGZpZWxkRWxlbWVudCkgPT4gIWZpZWxkRWxlbWVudC52YWxpZGl0eS52YWxpZCk7XG4gIH1cblxuICBfdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRGaWVsZCgpKSB7XG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmRpc2FibGVkID0gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKTtcbiAgICB9XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fZmllbGRMaXN0ID0gQXJyYXkuZnJvbShcbiAgICAgIHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5fZmllbGRTZWxlY3RvcilcbiAgICApO1xuXG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvclxuICAgICk7XG5cbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgIHRoaXMuX2ZpZWxkTGlzdC5mb3JFYWNoKChmaWVsZEVsZW1lbnQpID0+IHtcbiAgICAgIGZpZWxkRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xuICAgICAgICB0aGlzLl9jaGVja0ZpZWxkVmFsaWRpdHkoZmllbGRFbGVtZW50KTtcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIHRoaXMuX2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNldFwiLCAoKSA9PiB7XG4gICAgICB0aGlzLl9maWVsZExpc3QuZm9yRWFjaCgoZmllbGRFbGVtZW50KSA9PiB7XG4gICAgICAgIGZpZWxkRWxlbWVudC52YWx1ZSA9IFwiXCI7XG4gICAgICAgIHRoaXMuX2hpZGVGaWVsZEVycm9yKGZpZWxkRWxlbWVudCk7XG4gICAgICB9KTtcbiAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgfSk7XG4gIH1cblxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XG4gIH1cblxuICBfaGFuZGxlRXNjQ2xvc2UgPSAoZXZ0KSA9PiB7XG4gICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gIH07XG4gIC8vYWRkcyBldmVudCB0byB0aGUgZG9jdW1lbnRcbiAgX2FkZEV2ZW50VG9Eb2N1bWVudCgpIHtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gIH1cblxuICAvL3JlbW92ZXMgZXZlbnQgdG8gdGhlIGRvY3VtZW50XG4gIF9yZW1vdmVFdmVudEZyb21Eb2N1bWVudCgpIHtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gIH1cblxuICBvcGVuKCkge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwicG9wdXBfb3BlbmVkXCIpO1xuICAgIHRoaXMuX2FkZEV2ZW50VG9Eb2N1bWVudCgpO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJwb3B1cF9vcGVuZWRcIik7XG4gICAgdGhpcy5fcmVtb3ZlRXZlbnRGcm9tRG9jdW1lbnQoKTtcbiAgfVxuXG4gIF9oYW5kbGVDbGlja091dHNpZGVQb3B1cCA9IChldnQpID0+IHtcbiAgICBpZiAoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJwb3B1cF9vcGVuZWRcIikpIHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gIH07XG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5faGFuZGxlQ2xpY2tPdXRzaWRlUG9wdXApO1xuXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50XG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fY2xvc2UtYnV0dG9uXCIpXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHRoaXMuY2xvc2UoKSk7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3RvcihjYWxsYmFjaywgcG9wdXBTZWxlY3Rvcikge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX2NhbGxiYWNrID0gY2FsbGJhY2s7XG4gICAgdGhpcy5fcG9wdXBGb3JtID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Zvcm1cIik7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICBzdXBlci5jbG9zZSgpO1xuICAgIHRoaXMuX3BvcHVwRm9ybS5yZXNldCgpO1xuICB9XG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcbiAgICB0aGlzLl9mb3JtVmFsdWVzID0ge307XG4gICAgdGhpcy5fcG9wdXBGb3JtXG4gICAgICAucXVlcnlTZWxlY3RvckFsbChcIi5wb3B1cF9fZmllbGRcIilcbiAgICAgIC5mb3JFYWNoKChpbnB1dCkgPT4gKHRoaXMuX2Zvcm1WYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZSkpO1xuICB9XG5cbiAgX29uVXBsb2FkID0gKCkgPT4ge1xuICAgIHRoaXMuc3VibWl0QnV0dG9uID0gdGhpcy5fcG9wdXBGb3JtLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX3N1Ym1pdC1idXR0b25cIik7XG4gICAgdGhpcy5zdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSBcIlNhdmluZy4uLlwiO1xuICB9O1xuXG4gIF9hZnRlclVwbG9hZCA9ICgpID0+IHtcbiAgICB0aGlzLnN1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IFwiU2F2ZVwiO1xuICB9O1xuXG4gIF9oYW5kbGVTdWJtaXRFdmVudCA9IChlKSA9PiB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHRoaXMuX2dldElucHV0VmFsdWVzKCk7XG5cbiAgICB0aGlzLl9jYWxsYmFjayh0aGlzLl9mb3JtVmFsdWVzLCB0aGlzLl9vblVwbG9hZCwgdGhpcy5fYWZ0ZXJVcGxvYWQpO1xuICAgIHRoaXMuY2xvc2UoKTtcbiAgfTtcblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICAgIHRoaXMuX3BvcHVwRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIHRoaXMuX2hhbmRsZVN1Ym1pdEV2ZW50KTtcbiAgfVxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xuICBvcGVuKHsgbmFtZSwgbGluayB9KSB7XG4gICAgY29uc3QgcG9wdXBJbWFnZSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbWFnZVwiKTtcbiAgICBjb25zdCBwb3B1cEltYWdlTG9jYXRpb24gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIFwiLnBvcHVwX19pbWFnZS1sb2NhdGlvblwiXG4gICAgKTtcbiAgICBwb3B1cEltYWdlLnNyYyA9IGxpbms7XG4gICAgcG9wdXBJbWFnZS5hbHQgPSBgJHtuYW1lfSBwaWN0dXJlYDtcbiAgICBwb3B1cEltYWdlTG9jYXRpb24udGV4dENvbnRlbnQgPSBuYW1lO1xuICAgIHN1cGVyLm9wZW4oKTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XG4gICAgdGhpcy5fcmVuZGVyZWRJdGVtcyA9IGl0ZW1zO1xuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XG4gIH1cbiAgYWRkSXRlbShlbGVtZW50KSB7XG4gICAgdGhpcy5fY29udGFpbmVyLmFwcGVuZChlbGVtZW50KTtcbiAgfVxuICByZW5kZXJJdGVtcygpIHtcbiAgICB0aGlzLl9yZW5kZXJlZEl0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xuICAgIH0pO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XG4gIGNvbnN0cnVjdG9yKHsgbmFtZVNlbGVjdG9yLCBqb2JTZWxlY3RvciwgYXZhdGFyU2VsZWN0b3IgfSkge1xuICAgIHRoaXMuX25hbWVFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihuYW1lU2VsZWN0b3IpO1xuICAgIHRoaXMuX2pvYkVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGpvYlNlbGVjdG9yKTtcbiAgICB0aGlzLl9hdmF0YXJFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihhdmF0YXJTZWxlY3Rvcik7XG4gIH1cblxuICAvL2Rpc3BsYXkgdXNlcidzIGRhdGEgaW4gdGhlIGZvcm1cbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG5hbWU6IHRoaXMuX25hbWVFbGVtZW50LnRleHRDb250ZW50LFxuICAgICAgam9iOiB0aGlzLl9qb2JFbGVtZW50LnRleHRDb250ZW50LFxuICAgIH07XG4gIH1cbiAgLy9hZGQgbmV3IGRhdGEgdG8gdGhlIHBhZ2VcbiAgc2V0VXNlckluZm8oeyBwcm9maWxlTmFtZSwgcHJvZmlsZUpvYiwgcHJvZmlsZUF2YXRhciB9KSB7XG4gICAgdGhpcy5fbmFtZUVsZW1lbnQudGV4dENvbnRlbnQgPSBwcm9maWxlTmFtZTtcbiAgICB0aGlzLl9qb2JFbGVtZW50LnRleHRDb250ZW50ID0gcHJvZmlsZUpvYjtcbiAgICB0aGlzLl9hdmF0YXJFbGVtZW50LnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IGB1cmwoJHtwcm9maWxlQXZhdGFyfSlgO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBBcGkge1xuICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgdGhpcy5fYmFzZVVybCA9IG9wdGlvbnMuYmFzZVVybDtcbiAgICB0aGlzLl9oZWFkZXJzID0gb3B0aW9ucy5oZWFkZXJzO1xuICB9XG5cbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KS50aGVuKChyZXMpID0+IHtcbiAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgfSk7XG4gIH1cblxuICBnZXRJbml0aWFsQ2FyZHMoKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KS50aGVuKChyZXMpID0+IHtcbiAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgfSk7XG4gIH1cblxuICB1cGRhdGVVc2VySW5mbyhpdGVtKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBuYW1lOiBpdGVtLnByb2ZpbGVOYW1lLFxuICAgICAgICBhYm91dDogaXRlbS5wcm9maWxlSm9iLFxuICAgICAgfSksXG4gICAgfSkudGhlbigocmVzKSA9PiB7XG4gICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xuICAgIH0pO1xuICB9XG5cbiAgdXBkYXRlVXNlckF2YXRhcihpdGVtKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lL2F2YXRhcmAsIHtcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgYXZhdGFyOiBpdGVtLnByb2ZpbGVQaWN0dXJlVVJMLFxuICAgICAgfSksXG4gICAgfSkudGhlbigocmVzKSA9PiB7XG4gICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xuICAgIH0pO1xuICB9XG5cbiAgdXBsb2FkUGxhY2UoaXRlbSkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBuYW1lOiBpdGVtLm5hbWUsXG4gICAgICAgIGxpbms6IGl0ZW0ubGluayxcbiAgICAgIH0pLFxuICAgIH0pLnRoZW4oKHJlcykgPT4ge1xuICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcbiAgICB9KTtcbiAgfVxuXG4gIGRlbGV0ZUNhcmQoY2FyZElkKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfWAsIHtcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSkudGhlbigocmVzKSA9PiB7XG4gICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xuICAgIH0pO1xuICB9XG5cbiAgbGlrZUNhcmQoY2FyZElkKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzL2xpa2VzLyR7Y2FyZElkfWAsIHtcbiAgICAgIG1ldGhvZDogXCJQVVRcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSkudGhlbigocmVzKSA9PiB7XG4gICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xuICAgIH0pO1xuICB9XG5cbiAgdW5saWtlQ2FyZChjYXJkSWQpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvbGlrZXMvJHtjYXJkSWR9YCwge1xuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KS50aGVuKChyZXMpID0+IHtcbiAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgfSk7XG4gIH1cbn1cbiIsImV4cG9ydCBjb25zdCBwb3B1cEZpZWxkVGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19maWVsZF9lbF90aXRsZVwiKTtcbmV4cG9ydCBjb25zdCBwb3B1cEZpZWxkU3VidGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICBcIi5wb3B1cF9fZmllbGRfZWxfc3VidGl0bGVcIlxuKTtcblxuZXhwb3J0IGNvbnN0IHByb2ZpbGVBZGRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2FkZC1idXR0b25cIik7XG5cbmV4cG9ydCBjb25zdCBwb3B1cEZpZWxkUGxhY2VUaXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gIFwiLnBvcHVwX19maWVsZF9lbF9wbGFjZS10aXRsZVwiXG4pO1xuZXhwb3J0IGNvbnN0IHBvcHVwRmllbGRQbGFjZUltYWdlVVJMID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgXCIucG9wdXBfX2ZpZWxkX2VsX3BsYWNlLWltYWdlLXVybFwiXG4pO1xuXG5leHBvcnQgY29uc3QgcG9wdXBJbWFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2ltYWdlXCIpO1xuZXhwb3J0IGNvbnN0IHBvcHVwSW1hZ2VMb2NhdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gIFwiLnBvcHVwX19pbWFnZS1sb2NhdGlvblwiXG4pO1xuXG5leHBvcnQgY29uc3QgcHJvZmlsZUVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICBcIi5wcm9maWxlX19lZGl0LWJ1dHRvblwiXG4pO1xuXG5leHBvcnQgY29uc3QgcG9wdXBDb25maXJtU3VibWl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgXCIucG9wdXBfdHlwZV9jb25maXJtIC5wb3B1cF9fc3VibWl0LWJ1dHRvblwiXG4pO1xuXG5leHBvcnQgY29uc3QgcHJvZmlsZU92ZXJsYXkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX292ZXJsYXlcIik7XG5cbmV4cG9ydCBjb25zdCBpbml0aWFsQ2FyZHMgPSBbXG4gIHtcbiAgICBuYW1lOiBcIllvc2VtaXRlIFZhbGxleVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUveW9zZW1pdGUuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkxha2UgTG91aXNlXCIsXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9sYWtlLWxvdWlzZS5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiQmFsZCBNb3VudGFpbnNcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2JhbGQtbW91bnRhaW5zLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJMYXRlbWFyXCIsXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9sYXRlbWFyLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJWYW5vaXNlIE5hdGlvbmFsIFBhcmtcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL3Zhbm9pc2UuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkxhZ28gZGkgQnJhaWVzXCIsXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9sYWdvLmpwZ1wiLFxuICB9LFxuXTtcbiIsImltcG9ydCBDYXJkIGZyb20gXCIuLi9zY3JpcHRzL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL3NjcmlwdHMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XG5pbXBvcnQgUG9wdXAgZnJvbSBcIi4uL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cC5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL3NjcmlwdHMvY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL3NjcmlwdHMvY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xuaW1wb3J0IEFwaSBmcm9tIFwiLi4vc2NyaXB0cy9jb21wb25lbnRzL0FwaS5qc1wiO1xuXG5pbXBvcnQge1xuICBwcm9maWxlQWRkQnV0dG9uLFxuICBwcm9maWxlRWRpdEJ1dHRvbixcbiAgcG9wdXBGaWVsZFRpdGxlLFxuICBwb3B1cEZpZWxkU3VidGl0bGUsXG4gIHBvcHVwQ29uZmlybVN1Ym1pdEJ1dHRvbixcbiAgcHJvZmlsZU92ZXJsYXksXG59IGZyb20gXCIuLi9zY3JpcHRzL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xuXG5pbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xuXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyh7XG4gIG5hbWVTZWxlY3RvcjogXCIucHJvZmlsZV9fdGl0bGVcIixcbiAgam9iU2VsZWN0b3I6IFwiLnByb2ZpbGVfX3N1YnRpdGxlXCIsXG4gIGF2YXRhclNlbGVjdG9yOiBcIi5wcm9maWxlX19hdmF0YXJcIixcbn0pO1xuXG5jb25zdCBhcGkgPSBuZXcgQXBpKHtcbiAgYmFzZVVybDogXCJodHRwczovL2Fyb3VuZC5ub21vcmVwYXJ0aWVzLmNvL3YxL2dyb3VwLTExXCIsXG4gIGhlYWRlcnM6IHtcbiAgICBhdXRob3JpemF0aW9uOiBcIjQwM2JkYWZjLTBhNTItNGUwMi05YjgyLWM3ZThlNGY3ZmZiMVwiLFxuICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICB9LFxufSk7XG5cbmZ1bmN0aW9uIHNldFVzZXJEZXRhaWxzKHsgbmFtZSwgYWJvdXQsIGF2YXRhciB9KSB7XG4gIHVzZXJJbmZvLnNldFVzZXJJbmZvKHtcbiAgICBwcm9maWxlTmFtZTogbmFtZSxcbiAgICBwcm9maWxlSm9iOiBhYm91dCxcbiAgICBwcm9maWxlQXZhdGFyOiBhdmF0YXIsXG4gIH0pO1xufVxuXG5sZXQgdXNlcklkID0gXCJcIjtcbmFwaVxuICAuZ2V0VXNlckluZm8oKVxuICAudGhlbigocmVzdWx0KSA9PiB7XG4gICAgY29uc29sZS5sb2cocmVzdWx0KTtcbiAgICBzZXRVc2VyRGV0YWlscyhyZXN1bHQpO1xuICAgIHVzZXJJZCA9IHJlc3VsdC5faWQ7XG4gIH0pXG4gIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgY29uc29sZS5sb2coZXJyKTsgLy8gbG9nIHRoZSBlcnJvciB0byB0aGUgY29uc29sZVxuICB9KTtcblxubGV0IGNhcmRMaXN0ID0gXCJcIjtcblxuYXBpXG4gIC5nZXRJbml0aWFsQ2FyZHMoKVxuICAudGhlbigocmVzdWx0KSA9PiB7XG4gICAgY29uc29sZS5sb2cocmVzdWx0KTtcbiAgICBjb25zdCBpbml0aWFsQ2FyZHMgPSByZXN1bHQ7XG4gICAgY2FyZExpc3QgPSBuZXcgU2VjdGlvbihcbiAgICAgIHtcbiAgICAgICAgaXRlbXM6IGluaXRpYWxDYXJkcyxcbiAgICAgICAgcmVuZGVyZXI6IChpdGVtKSA9PiB7XG4gICAgICAgICAgY3JlYXRlQ2FyZChpdGVtKTtcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgICBcIi5wbGFjZXNcIlxuICAgICk7XG5cbiAgICBjYXJkTGlzdC5yZW5kZXJJdGVtcygpO1xuICB9KVxuICAuY2F0Y2goKGVycikgPT4ge1xuICAgIGNvbnNvbGUubG9nKGVycik7IC8vIGxvZyB0aGUgZXJyb3IgdG8gdGhlIGNvbnNvbGVcbiAgfSk7XG5cbmNvbnN0IGdldENhcmQgPSAoaXRlbSkgPT4ge1xuICBjb25zdCBjYXJkID0gbmV3IENhcmQoe1xuICAgIGRhdGE6IGl0ZW0sXG4gICAgdGVtcGxhdGVTZWxlY3RvcjogXCIjcGxhY2UtdGVtcGxhdGVcIixcbiAgICBoYW5kbGVDbGljazogKCkgPT4ge1xuICAgICAgaW1hZ2VQb3B1cC5vcGVuKGl0ZW0pO1xuICAgIH0sXG4gICAgaGFuZGxlRGVsZXRlOiAoY2FyZElkLCByZW1vdmVDYXJkKSA9PiB7XG4gICAgICBwb3B1cENvbmZpcm0ub3BlbigpO1xuICAgICAgcG9wdXBDb25maXJtU3VibWl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGFwaVxuICAgICAgICAgIC5kZWxldGVDYXJkKGNhcmRJZClcbiAgICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgICByZW1vdmVDYXJkKCk7XG4gICAgICAgICAgfSlcbiAgICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTsgLy8gbG9nIHRoZSBlcnJvciB0byB0aGUgY29uc29sZVxuICAgICAgICAgIH0pO1xuICAgICAgICBwb3B1cENvbmZpcm0uY2xvc2UoKTtcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgbGlrZUNhcmQ6IChjYXJkSWQpID0+IHtcbiAgICAgIHJldHVybiBhcGkubGlrZUNhcmQoY2FyZElkKTtcbiAgICB9LFxuICAgIHVubGlrZUNhcmQ6IChjYXJkSWQpID0+IHtcbiAgICAgIHJldHVybiBhcGkudW5saWtlQ2FyZChjYXJkSWQpO1xuICAgIH0sXG4gICAgdXNlcklkLFxuICB9KTtcbiAgcmV0dXJuIGNhcmQuZ2VuZXJhdGVDYXJkKCk7XG59O1xuXG5jb25zdCBjcmVhdGVDYXJkID0gKGl0ZW0pID0+IHtcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBnZXRDYXJkKGl0ZW0pO1xuICBjYXJkTGlzdC5hZGRJdGVtKGNhcmRFbGVtZW50KTtcbn07XG5cbmNvbnN0IGltYWdlUG9wdXAgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoXCIucG9wdXBfdHlwZV9pbWFnZVwiKTtcblxuY29uc3QgcG9wdXBGb3JtTGlzdCA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5wb3B1cF9fZm9ybVwiKSk7XG5cbnBvcHVwRm9ybUxpc3QuZm9yRWFjaCgoZm9ybUVsZW1lbnQpID0+IHtcbiAgY29uc3QgZm9ybVRvQmVWYWxpZGF0ZWQgPSBuZXcgRm9ybVZhbGlkYXRvcihcbiAgICB7XG4gICAgICBmb3JtU2VsZWN0b3I6IFwiLnBvcHVwX19mb3JtXCIsXG4gICAgICBmaWVsZFNlbGVjdG9yOiBcIi5wb3B1cF9fZmllbGRcIixcbiAgICAgIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5wb3B1cF9fc3VibWl0LWJ1dHRvblwiLFxuICAgICAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJwb3B1cF9fc3VibWl0LWJ1dHRvbl9kaXNhYmxlZFwiLFxuICAgICAgZmllbGRFcnJvckNsYXNzOiBcInBvcHVwX19maWVsZF90eXBlX2Vycm9yXCIsXG4gICAgICBlcnJvckNsYXNzOiBcInBvcHVwX19maWVsZC1lcnJvcl9hY3RpdmVcIixcbiAgICB9LFxuICAgIGZvcm1FbGVtZW50XG4gICk7XG4gIGZvcm1Ub0JlVmFsaWRhdGVkLmVuYWJsZVZhbGlkYXRpb24oKTtcbn0pO1xuXG5jb25zdCBwb3B1cEFkZCA9IG5ldyBQb3B1cFdpdGhGb3JtKChpdGVtLCBvblVwbG9hZCwgYWZ0ZXJVcGxvYWQpID0+IHtcbiAgb25VcGxvYWQoKTtcbiAgYXBpXG4gICAgLnVwbG9hZFBsYWNlKHsgbmFtZTogaXRlbS5wbGFjZU5hbWUsIGxpbms6IGl0ZW0ucGxhY2VJbWFnZVVSTCB9KVxuICAgIC50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgIC8vY29uc29sZS5sb2cocmVzdWx0KTtcbiAgICAgIGNyZWF0ZUNhcmQocmVzdWx0KTtcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgIH0pXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgYWZ0ZXJVcGxvYWQoKTtcbiAgICB9KTtcbn0sIFwiLnBvcHVwX3R5cGVfYWRkXCIpO1xuXG5jb25zdCBwb3B1cEVkaXQgPSBuZXcgUG9wdXBXaXRoRm9ybSgoaXRlbSwgb25VcGxvYWQsIGFmdGVyVXBsb2FkKSA9PiB7XG4gIG9uVXBsb2FkKCk7XG4gIGFwaVxuICAgIC51cGRhdGVVc2VySW5mbyhpdGVtKVxuICAgIC50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgIC8vY29uc29sZS5sb2cocmVzdWx0KTtcbiAgICAgIHNldFVzZXJEZXRhaWxzKHJlc3VsdCk7XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICB9KVxuICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgIGFmdGVyVXBsb2FkKCk7XG4gICAgfSk7XG59LCBcIi5wb3B1cF90eXBlX2VkaXRcIik7XG5cbmNvbnN0IHBvcHVwQ2hhbmdlID0gbmV3IFBvcHVwV2l0aEZvcm0oKGl0ZW0sIG9uVXBsb2FkLCBhZnRlclVwbG9hZCkgPT4ge1xuICBvblVwbG9hZCgpO1xuICBhcGlcbiAgICAudXBkYXRlVXNlckF2YXRhcihpdGVtKVxuICAgIC50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKHJlc3VsdCk7XG4gICAgICBzZXRVc2VyRGV0YWlscyhyZXN1bHQpO1xuICAgIH0pXG4gICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKGVycik7IC8vIGxvZyB0aGUgZXJyb3IgdG8gdGhlIGNvbnNvbGVcbiAgICB9KVxuICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgIGFmdGVyVXBsb2FkKCk7XG4gICAgfSk7XG59LCBcIi5wb3B1cF90eXBlX2NoYW5nZVwiKTtcblxuY29uc3QgcG9wdXBDb25maXJtID0gbmV3IFBvcHVwKFwiLnBvcHVwX3R5cGVfY29uZmlybVwiKTtcblxucG9wdXBBZGQuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbnBvcHVwRWRpdC5zZXRFdmVudExpc3RlbmVycygpO1xucG9wdXBDaGFuZ2Uuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbmltYWdlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbnBvcHVwQ29uZmlybS5zZXRFdmVudExpc3RlbmVycygpO1xuXG5wcm9maWxlRWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xuICBwb3B1cEVkaXQub3BlbigpO1xuXG4gIGNvbnN0IHsgbmFtZSwgam9iIH0gPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xuICBwb3B1cEZpZWxkVGl0bGUudmFsdWUgPSBuYW1lO1xuICBwb3B1cEZpZWxkU3VidGl0bGUudmFsdWUgPSBqb2I7XG59KTtcblxucHJvZmlsZUFkZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xuICBwb3B1cEFkZC5vcGVuKCk7XG59KTtcblxucHJvZmlsZU92ZXJsYXkuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcbiAgcG9wdXBDaGFuZ2Uub3BlbigpO1xufSk7XG4iXSwibmFtZXMiOlsiQ2FyZCIsImRhdGEiLCJ0ZW1wbGF0ZVNlbGVjdG9yIiwiaGFuZGxlQ2xpY2siLCJoYW5kbGVEZWxldGUiLCJsaWtlQ2FyZCIsInVubGlrZUNhcmQiLCJ1c2VySWQiLCJfcGxhY2VEZWxldGVCdXR0b24iLCJjbG9zZXN0IiwicmVtb3ZlIiwidGhpcyIsIl9uYW1lIiwibmFtZSIsIl9saW5rIiwibGluayIsIl9saWtlcyIsImxpa2VzIiwiX2NhcmRJZCIsIl9pZCIsIl9vd25lciIsIm93bmVyIiwiX3VzZXJJZCIsIl90ZW1wbGF0ZVNlbGVjdG9yIiwiX2hhbmRsZUNsaWNrIiwiX2hhbmRsZURlbGV0ZSIsIl9oYW5kbGVMaWtlQ2FyZCIsIl9oYW5kbGVVbmxpa2VDYXJkIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY29udGVudCIsImNsb25lTm9kZSIsIl9wbGFjZSIsIl9nZXRQbGFjZUVsZW1lbnQiLCJfcGxhY2VUaXRsZSIsIl9wbGFjZUltYWdlIiwiX3BsYWNlTGlrZUJ1dHRvbiIsIl9wbGFjZUxpa2VDb3VudCIsImNsYXNzTGlzdCIsImFkZCIsInNvbWUiLCJpdGVtIiwidGV4dENvbnRlbnQiLCJsZW5ndGgiLCJzcmMiLCJhbHQiLCJjb250YWlucyIsInRoZW4iLCJyZXN1bHQiLCJjYXRjaCIsImVyciIsImNvbnNvbGUiLCJsb2ciLCJhZGRFdmVudExpc3RlbmVyIiwiX2xpa2VDYXJkIiwiX3JlbW92ZUNhcmQiLCJfZ2V0UGxhY2VEZXRhaWxzIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiRm9ybVZhbGlkYXRvciIsImZvcm1FbGVtZW50IiwiZm9ybVNlbGVjdG9yIiwiZmllbGRTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImZpZWxkRXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJfZm9ybVNlbGVjdG9yIiwiX2ZpZWxkU2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9maWVsZEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsIl9mb3JtRWxlbWVudCIsImZpZWxkRWxlbWVudCIsImVycm9yTWVzc2FnZSIsImVycm9yRWxlbWVudCIsImlkIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oaWRlRmllbGRFcnJvciIsIl9zaG93RmllbGRFcnJvciIsInZhbGlkYXRpb25NZXNzYWdlIiwiX2ZpZWxkTGlzdCIsIl9oYXNJbnZhbGlkRmllbGQiLCJfYnV0dG9uRWxlbWVudCIsImRpc2FibGVkIiwicmVtb3ZlQXR0cmlidXRlIiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsIl90b2dnbGVCdXR0b25TdGF0ZSIsImZvckVhY2giLCJfY2hlY2tGaWVsZFZhbGlkaXR5IiwidmFsdWUiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJldnQiLCJrZXkiLCJjbG9zZSIsInRhcmdldCIsIl9wb3B1cEVsZW1lbnQiLCJfaGFuZGxlRXNjQ2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiX2FkZEV2ZW50VG9Eb2N1bWVudCIsIl9yZW1vdmVFdmVudEZyb21Eb2N1bWVudCIsIl9oYW5kbGVDbGlja091dHNpZGVQb3B1cCIsIlBvcHVwV2l0aEZvcm0iLCJjYWxsYmFjayIsInN1Ym1pdEJ1dHRvbiIsIl9wb3B1cEZvcm0iLCJlIiwicHJldmVudERlZmF1bHQiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJfY2FsbGJhY2siLCJfZm9ybVZhbHVlcyIsIl9vblVwbG9hZCIsIl9hZnRlclVwbG9hZCIsInJlc2V0IiwiaW5wdXQiLCJfaGFuZGxlU3VibWl0RXZlbnQiLCJQb3B1cFdpdGhJbWFnZSIsInBvcHVwSW1hZ2UiLCJwb3B1cEltYWdlTG9jYXRpb24iLCJTZWN0aW9uIiwiY29udGFpbmVyU2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX3JlbmRlcmVkSXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwiZWxlbWVudCIsImFwcGVuZCIsIlVzZXJJbmZvIiwibmFtZVNlbGVjdG9yIiwiam9iU2VsZWN0b3IiLCJhdmF0YXJTZWxlY3RvciIsIl9uYW1lRWxlbWVudCIsIl9qb2JFbGVtZW50IiwiX2F2YXRhckVsZW1lbnQiLCJqb2IiLCJwcm9maWxlTmFtZSIsInByb2ZpbGVKb2IiLCJwcm9maWxlQXZhdGFyIiwic3R5bGUiLCJiYWNrZ3JvdW5kSW1hZ2UiLCJBcGkiLCJvcHRpb25zIiwiX2Jhc2VVcmwiLCJiYXNlVXJsIiwiX2hlYWRlcnMiLCJoZWFkZXJzIiwiZmV0Y2giLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwibWV0aG9kIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJhYm91dCIsImF2YXRhciIsInByb2ZpbGVQaWN0dXJlVVJMIiwiY2FyZElkIiwicG9wdXBGaWVsZFRpdGxlIiwicG9wdXBGaWVsZFN1YnRpdGxlIiwicHJvZmlsZUFkZEJ1dHRvbiIsInByb2ZpbGVFZGl0QnV0dG9uIiwicG9wdXBDb25maXJtU3VibWl0QnV0dG9uIiwicHJvZmlsZU92ZXJsYXkiLCJ1c2VySW5mbyIsImFwaSIsImF1dGhvcml6YXRpb24iLCJzZXRVc2VyRGV0YWlscyIsInNldFVzZXJJbmZvIiwiZ2V0VXNlckluZm8iLCJjYXJkTGlzdCIsImdldEluaXRpYWxDYXJkcyIsImNyZWF0ZUNhcmQiLCJyZW5kZXJJdGVtcyIsImNhcmRFbGVtZW50IiwiaW1hZ2VQb3B1cCIsIm9wZW4iLCJyZW1vdmVDYXJkIiwicG9wdXBDb25maXJtIiwiZGVsZXRlQ2FyZCIsImdlbmVyYXRlQ2FyZCIsImdldENhcmQiLCJhZGRJdGVtIiwiZW5hYmxlVmFsaWRhdGlvbiIsInBvcHVwQWRkIiwib25VcGxvYWQiLCJhZnRlclVwbG9hZCIsInVwbG9hZFBsYWNlIiwicGxhY2VOYW1lIiwicGxhY2VJbWFnZVVSTCIsImZpbmFsbHkiLCJwb3B1cEVkaXQiLCJ1cGRhdGVVc2VySW5mbyIsInBvcHVwQ2hhbmdlIiwidXBkYXRlVXNlckF2YXRhciIsInNldEV2ZW50TGlzdGVuZXJzIl0sInNvdXJjZVJvb3QiOiIifQ==